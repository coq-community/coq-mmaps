<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<link href="coqdoc.css" rel="stylesheet" type="text/css" />
<link href="coqdocjs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="config.js"></script>
<script type="text/javascript" src="coqdocjs.js"></script>
</head>

<body onload="document.getElementById('content').focus()">
  <div id="header">
    <span class="left">
      <span class="modulename"> <script> document.write(document.title) </script> </span>
    </span>

    <span class="button" id="toggle-proofs"></span>

    <span class="right">
      <a href="./../..">Project Website</a>
      <a href="./indexpage.html">Index</a>
      <a href="./toc.html">Table of Contents</a>
    </span>
</div>
    <div id="content" tabindex="-1" onblur="document.getElementById('content').focus()">
    <div id="main">
<div class="code">
</div>

<div class="doc">
<a id="lab104"></a><h1 class="section">Finite Modular Maps: AVL Proofs</h1>

<div class="paragraph"> </div>

 Author: Pierre Letouzey (Université de Paris - INRIA),
    adapted from earlier works in Coq Standard Library, see README.md.
    License: LGPL-2.1-only, see file LICENSE. 
<div class="paragraph"> </div>

 This is a complement to <span class="inlinecode"><a class="idref" href="MMaps.AVL.html#K"><span class="id" title="module">MMaps.AVL</span></a></span>, proving the AVL balancing
    invariants for the code in <span class="inlinecode"><a class="idref" href="MMaps.AVL.html#K"><span class="id" title="module">MMaps.AVL</span></a></span>, and hence the logarithmic
    depth bound. These extra proofs are not even loaded during a regular
    usage of <span class="inlinecode"><a class="idref" href="MMaps.AVL.html#K"><span class="id" title="module">MMaps.AVL</span></a></span>, which already provides proofs of observational
    correctness (the binary search tree invariants).

<div class="paragraph"> </div>

    This is an adapation of Coq <span class="inlinecode"><span class="id" title="var">MSetFullAVL</span></span> to maps. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">Coq</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.ZArith.ZArith.html#"><span class="id" title="library">ZArith</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.ZArith.Int.html#"><span class="id" title="library">Int</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.micromega.Lia.html#"><span class="id" title="library">Lia</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Arith.PeanoNat.html#"><span class="id" title="library">PeanoNat</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.funind.FunInd.html#"><span class="id" title="library">FunInd</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Structures.Orders.html#"><span class="id" title="library">Orders</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">MMaps</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="MMaps.GenTree.html#"><span class="id" title="library">GenTree</span></a> <a class="idref" href="MMaps.AVL.html#"><span class="id" title="library">AVL</span></a>.<br/>

<br/>
<span class="id" title="keyword">Set Implicit Arguments</span>.<br/>

<br/>
<span class="id" title="keyword">Module</span> <a id="AvlProofs" class="idref" href="#AvlProofs"><span class="id" title="module">AvlProofs</span></a> (<span class="id" title="keyword">Import</span> <span class="id" title="var">I</span>:<a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.ZArith.Int.html#Int"><span class="id" title="module">Int</span></a>)(<span class="id" title="var">X</span>:<a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Structures.Orders.html#OrderedType"><span class="id" title="module">OrderedType</span></a>).<br/>
<span class="id" title="keyword">Include</span> <a class="idref" href="MMaps.AVL.html#MakeRaw"><span class="id" title="module">MMaps.AVL.MakeRaw</span></a> <a class="idref" href="MMaps.AVLproofs.html#I"><span class="id" title="module">I</span></a> <a class="idref" href="MMaps.AVLproofs.html#X"><span class="id" title="module">X</span></a>.<br/>
<span class="id" title="keyword">Module</span> <span class="id" title="keyword">Import</span> <a id="AvlProofs.II" class="idref" href="#AvlProofs.II"><span class="id" title="module">II</span></a> := <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.ZArith.Int.html#MoreInt"><span class="id" title="module">MoreInt</span></a> <a class="idref" href="MMaps.AVLproofs.html#I"><span class="id" title="module">I</span></a>.<br/>
<span class="id" title="keyword">Local Open</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">Int_scope</span>.<br/>
<span class="id" title="keyword">Import</span> <a class="idref" href="MMaps.GenTree.html#PairNotations"><span class="id" title="module">GenTree.PairNotations</span></a>. <span class="comment">(*&nbsp;1 and 2&nbsp;for&nbsp;fst&nbsp;and&nbsp;snd&nbsp;*)</span><br/>

<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">lia_max</span> := <span class="id" title="var">i2z_refl</span>; <span class="id" title="var">lia</span>.<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">mysubst</span> :=<br/>
&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;| <span class="id" title="var">E</span> : <span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><span class="id" title="var">_</span> |- <span class="id" title="var">_</span> ⇒ <span class="id" title="tactic">rewrite</span> <span class="id" title="var">E</span> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">clear</span> <span class="id" title="var">E</span>; <span class="id" title="var">mysubst</span><br/>
&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span> ⇒ <span class="id" title="tactic">idtac</span><br/>
&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab105"></a><h2 class="section">AVL trees</h2>

<div class="paragraph"> </div>

 <span class="inlinecode"><a class="idref" href="MMaps.AVLproofs.html#AvlProofs.avl"><span class="id" title="inductive">avl</span></a></span> <span class="inlinecode"><span class="id" title="var">s</span></span> : <span class="inlinecode"><span class="id" title="var">s</span></span> is a properly balanced AVL tree,
    i.e. for any node the heights of the two children
    differ by at most 2 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Inductive</span> <a id="AvlProofs.avl" class="idref" href="#AvlProofs.avl"><span class="id" title="definition, inductive"><span id="AvlProofs.avl_ind" class="id"><span id="AvlProofs.avl_sind" class="id">avl</span></span></span></a> <a id="elt:1" class="idref" href="#elt:1"><span class="id" title="binder">elt</span></a> : <a class="idref" href="MMaps.AVLproofs.html#AvlProofs.tree"><span class="id" title="inductive">tree</span></a> <span class="id" title="var">elt</span> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;| <a id="AvlProofs.RBLeaf" class="idref" href="#AvlProofs.RBLeaf"><span class="id" title="constructor">RBLeaf</span></a> : <a class="idref" href="MMaps.AVLproofs.html#avl:2"><span class="id" title="inductive">avl</span></a> (<a class="idref" href="MMaps.AVLproofs.html#AvlProofs.Leaf"><span class="id" title="constructor">Leaf</span></a> <span class="id" title="var">_</span>)<br/>
&nbsp;&nbsp;| <a id="AvlProofs.RBNode" class="idref" href="#AvlProofs.RBNode"><span class="id" title="constructor">RBNode</span></a> : <span class="id" title="keyword">∀</span> <a id="x:4" class="idref" href="#x:4"><span class="id" title="binder">x</span></a> <a id="e:5" class="idref" href="#e:5"><span class="id" title="binder">e</span></a> <a id="l:6" class="idref" href="#l:6"><span class="id" title="binder">l</span></a> <a id="r:7" class="idref" href="#r:7"><span class="id" title="binder">r</span></a> <a id="h:8" class="idref" href="#h:8"><span class="id" title="binder">h</span></a>, <a class="idref" href="MMaps.AVLproofs.html#avl:2"><span class="id" title="inductive">avl</span></a> <a class="idref" href="MMaps.AVLproofs.html#l:6"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MMaps.AVLproofs.html#avl:2"><span class="id" title="inductive">avl</span></a> <a class="idref" href="MMaps.AVLproofs.html#r:7"><span class="id" title="variable">r</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.ZArith.Int.html#Int.::Int_scope:'-'_x"><span class="id" title="notation">-</span></a>(2) <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.ZArith.Int.html#be4c59c76b318250400dadb817b41e75"><span class="id" title="notation">≤</span></a> <a class="idref" href="MMaps.AVLproofs.html#AvlProofs.height"><span class="id" title="definition">height</span></a> <a class="idref" href="MMaps.AVLproofs.html#l:6"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.ZArith.Int.html#Int.::Int_scope:x_'-'_x"><span class="id" title="notation">-</span></a> <a class="idref" href="MMaps.AVLproofs.html#AvlProofs.height"><span class="id" title="definition">height</span></a> <a class="idref" href="MMaps.AVLproofs.html#r:7"><span class="id" title="variable">r</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.ZArith.Int.html#be4c59c76b318250400dadb817b41e75"><span class="id" title="notation">≤</span></a> 2 <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MMaps.AVLproofs.html#h:8"><span class="id" title="variable">h</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MMaps.AVLproofs.html#I.max"><span class="id" title="axiom">max</span></a> (<a class="idref" href="MMaps.AVLproofs.html#AvlProofs.height"><span class="id" title="definition">height</span></a> <a class="idref" href="MMaps.AVLproofs.html#l:6"><span class="id" title="variable">l</span></a>) (<a class="idref" href="MMaps.AVLproofs.html#AvlProofs.height"><span class="id" title="definition">height</span></a> <a class="idref" href="MMaps.AVLproofs.html#r:7"><span class="id" title="variable">r</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.ZArith.Int.html#004c359642fbe9dbd252a6335642f93a"><span class="id" title="notation">+</span></a> 1 <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MMaps.AVLproofs.html#avl:2"><span class="id" title="inductive">avl</span></a> (<a class="idref" href="MMaps.AVLproofs.html#AvlProofs.Node"><span class="id" title="constructor">Node</span></a> <a class="idref" href="MMaps.AVLproofs.html#h:8"><span class="id" title="variable">h</span></a> <a class="idref" href="MMaps.AVLproofs.html#l:6"><span class="id" title="variable">l</span></a> <a class="idref" href="MMaps.AVLproofs.html#x:4"><span class="id" title="variable">x</span></a> <a class="idref" href="MMaps.AVLproofs.html#e:5"><span class="id" title="variable">e</span></a> <a class="idref" href="MMaps.AVLproofs.html#r:7"><span class="id" title="variable">r</span></a>).<br/>

<br/>
<span class="id" title="keyword">Class</span> <a id="AvlProofs.Avl" class="idref" href="#AvlProofs.Avl"><span class="id" title="inductive, record"><span id="AvlProofs.Avl" class="id">Avl</span></span></a> <a id="elt:9" class="idref" href="#elt:9"><span class="id" title="binder">elt</span></a> (<a id="t:10" class="idref" href="#t:10"><span class="id" title="binder">t</span></a>:<a class="idref" href="MMaps.AVLproofs.html#AvlProofs.tree"><span class="id" title="inductive">tree</span></a> <a class="idref" href="MMaps.AVLproofs.html#elt:9"><span class="id" title="variable">elt</span></a>) : <span class="id" title="keyword">Prop</span> := <a id="AvlProofs.mkAvl" class="idref" href="#AvlProofs.mkAvl"><span class="id" title="constructor, projection"><span id="AvlProofs.mkAvl" class="id">mkAvl</span></span></a> : <a class="idref" href="MMaps.AVLproofs.html#AvlProofs.avl"><span class="id" title="inductive">avl</span></a> <a class="idref" href="MMaps.AVLproofs.html#t:10"><span class="id" title="variable">t</span></a>.<br/>

<br/>
#[<span class="id" title="var">export</span>] <span class="id" title="keyword">Instance</span> <a id="AvlProofs.avl_Avl" class="idref" href="#AvlProofs.avl_Avl"><span class="id" title="instance">avl_Avl</span></a> <a id="elt:13" class="idref" href="#elt:13"><span class="id" title="binder">elt</span></a> (<a id="s:14" class="idref" href="#s:14"><span class="id" title="binder">s</span></a>:<a class="idref" href="MMaps.AVLproofs.html#AvlProofs.tree"><span class="id" title="inductive">tree</span></a> <a class="idref" href="MMaps.AVLproofs.html#elt:13"><span class="id" title="variable">elt</span></a>) (<a id="Hs:15" class="idref" href="#Hs:15"><span class="id" title="binder">Hs</span></a> : <a class="idref" href="MMaps.AVLproofs.html#AvlProofs.avl"><span class="id" title="inductive">avl</span></a> <a class="idref" href="MMaps.AVLproofs.html#s:14"><span class="id" title="variable">s</span></a>) : <a class="idref" href="MMaps.AVLproofs.html#AvlProofs.Avl"><span class="id" title="class">Avl</span></a> <a class="idref" href="MMaps.AVLproofs.html#s:14"><span class="id" title="variable">s</span></a> := <span class="id" title="var">Hs</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab106"></a><h2 class="section">Automation and dedicated tactics</h2>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Local Hint Constructors</span> <a class="idref" href="MMaps.AVLproofs.html#avl"><span class="id" title="inductive">avl</span></a> : <span class="id" title="var">map</span>.<br/>

<br/>
</div>

<div class="doc">
A tactic for cleaning hypothesis after use of functional induction. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">clearf</span> :=<br/>
&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <span class="id" title="var">H</span> : (@<a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#eq"><span class="id" title="inductive">Logic.eq</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Specif.html#sumbool"><span class="id" title="inductive">sumbool</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) <span class="id" title="var">_</span> <span class="id" title="var">_</span>) |- <span class="id" title="var">_</span> ⇒ <span class="id" title="tactic">clear</span> <span class="id" title="var">H</span>; <span class="id" title="var">clearf</span><br/>
&nbsp;&nbsp;| <span class="id" title="var">H</span> : <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">(</span></a><span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.ZArith.Int.html#7781bac2d82de50b686171410bc1bdf4"><span class="id" title="notation">=?</span></a> <span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> |- <span class="id" title="var">_</span> ⇒ <span class="id" title="tactic">rewrite</span> <a class="idref" href="MMaps.AVLproofs.html#AvlProofs.eqb_eq"><span class="id" title="lemma">II.eqb_eq</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>; <span class="id" title="var">clearf</span><br/>
&nbsp;&nbsp;| <span class="id" title="var">H</span> : <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">(</span></a><span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.ZArith.Int.html#47c9f2ba1df6e1f4ba802291f555d67a"><span class="id" title="notation">&lt;?</span></a> <span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> |- <span class="id" title="var">_</span> ⇒ <span class="id" title="tactic">rewrite</span> <a class="idref" href="MMaps.AVLproofs.html#AvlProofs.ltb_lt"><span class="id" title="lemma">II.ltb_lt</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>; <span class="id" title="var">clearf</span><br/>
&nbsp;&nbsp;| <span class="id" title="var">H</span> : <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">(</span></a><span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.ZArith.Int.html#752b87795e3b3c1ea7bc80666aee7327"><span class="id" title="notation">&lt;=?</span></a> <span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> |- <span class="id" title="var">_</span> ⇒ <span class="id" title="tactic">rewrite</span> <a class="idref" href="MMaps.AVLproofs.html#AvlProofs.leb_le"><span class="id" title="lemma">II.leb_le</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>; <span class="id" title="var">clearf</span><br/>
&nbsp;&nbsp;| <span class="id" title="var">H</span> : <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">(</span></a><span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.ZArith.Int.html#7781bac2d82de50b686171410bc1bdf4"><span class="id" title="notation">=?</span></a> <span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a> |- <span class="id" title="var">_</span> ⇒ <span class="id" title="tactic">rewrite</span> <a class="idref" href="MMaps.AVLproofs.html#AvlProofs.eqb_neq"><span class="id" title="lemma">II.eqb_neq</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>; <span class="id" title="var">clearf</span><br/>
&nbsp;&nbsp;| <span class="id" title="var">H</span> : <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">(</span></a><span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.ZArith.Int.html#47c9f2ba1df6e1f4ba802291f555d67a"><span class="id" title="notation">&lt;?</span></a> <span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a> |- <span class="id" title="var">_</span> ⇒ <span class="id" title="tactic">rewrite</span> <a class="idref" href="MMaps.AVLproofs.html#AvlProofs.ltb_nlt"><span class="id" title="lemma">II.ltb_nlt</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>; <span class="id" title="var">clearf</span><br/>
&nbsp;&nbsp;| <span class="id" title="var">H</span> : <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">(</span></a><span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.ZArith.Int.html#752b87795e3b3c1ea7bc80666aee7327"><span class="id" title="notation">&lt;=?</span></a> <span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a> |- <span class="id" title="var">_</span> ⇒ <span class="id" title="tactic">rewrite</span> <a class="idref" href="MMaps.AVLproofs.html#AvlProofs.leb_nle"><span class="id" title="lemma">II.leb_nle</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>; <span class="id" title="var">clearf</span><br/>
&nbsp;&nbsp;| <span class="id" title="var">_</span> ⇒ <span class="id" title="tactic">idtac</span><br/>
&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">avl2Avl</span> := <span class="id" title="tactic">change</span> <a class="idref" href="MMaps.AVLproofs.html#AvlProofs.avl"><span class="id" title="inductive">avl</span></a> <span class="id" title="keyword">with</span> <a class="idref" href="MMaps.AVLproofs.html#AvlProofs.Avl"><span class="id" title="class">Avl</span></a> <span class="id" title="tactic">in</span> ×.<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">Avl2avl</span> := <span class="id" title="tactic">change</span> <a class="idref" href="MMaps.AVLproofs.html#AvlProofs.Avl"><span class="id" title="class">Avl</span></a> <span class="id" title="keyword">with</span> <a class="idref" href="MMaps.AVLproofs.html#AvlProofs.avl"><span class="id" title="inductive">avl</span></a> <span class="id" title="tactic">in</span> ×.<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">inv_avl</span> := <span class="id" title="var">Avl2avl</span>; <span class="id" title="var">inv</span> <span class="id" title="var">avl</span>; <span class="id" title="var">avl2Avl</span>.<br/>
<span class="comment">(*&nbsp;Similar,&nbsp;but&nbsp;non-recursive&nbsp;*)</span><br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">inv_avl'</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span> <span class="id" title="var">H</span> : <a class="idref" href="MMaps.AVLproofs.html#AvlProofs.Avl"><span class="id" title="class">Avl</span></a> (<a class="idref" href="MMaps.AVLproofs.html#AvlProofs.Node"><span class="id" title="constructor">Node</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) |- <span class="id" title="var">_</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion_clear</span> <span class="id" title="var">H</span>; <span class="id" title="var">avl2Avl</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab107"></a><h2 class="section">AVL trees have logarithmic depth</h2>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Module</span> <a id="AvlProofs.LogDepth" class="idref" href="#AvlProofs.LogDepth"><span class="id" title="module">LogDepth</span></a>.<br/>

<br/>
<span class="id" title="keyword">Local Open</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">nat_scope</span>.<br/>

<br/>
</div>

<div class="doc">
The minimal cardinal of an AVL tree of a given height.
    NB: this minimal cardinal is optimal, i.e. for any height,
    we could build an AVL tree of this cardinal. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Fixpoint</span> <a id="AvlProofs.LogDepth.mincard" class="idref" href="#AvlProofs.LogDepth.mincard"><span class="id" title="definition">mincard</span></a> <a id="n:16" class="idref" href="#n:16"><span class="id" title="binder">n</span></a> :=<br/>
&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="MMaps.AVLproofs.html#n:16"><span class="id" title="variable">n</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;| <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Datatypes.html#O"><span class="id" title="constructor">O</span></a> ⇒ <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Datatypes.html#O"><span class="id" title="constructor">O</span></a><br/>
&nbsp;| 1 ⇒ 1<br/>
&nbsp;| 2 ⇒ 2<br/>
&nbsp;| <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">n</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">p</span>) ⇒ <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> (<a class="idref" href="MMaps.AVLproofs.html#mincard:17"><span class="id" title="definition">mincard</span></a> <a class="idref" href="MMaps.AVLproofs.html#n:16"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="MMaps.AVLproofs.html#mincard:17"><span class="id" title="definition">mincard</span></a> <span class="id" title="var">p</span>)<br/>
&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
</div>

<div class="doc">
First, some basic properties of <span class="inlinecode"><a class="idref" href="MMaps.AVLproofs.html#AvlProofs.LogDepth.mincard"><span class="id" title="definition">mincard</span></a></span> 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <a id="AvlProofs.LogDepth.mincard_eqn" class="idref" href="#AvlProofs.LogDepth.mincard_eqn"><span class="id" title="lemma">mincard_eqn</span></a> <a id="n:19" class="idref" href="#n:19"><span class="id" title="binder">n</span></a> :<br/>
&nbsp;<a class="idref" href="MMaps.AVLproofs.html#AvlProofs.LogDepth.mincard"><span class="id" title="definition">mincard</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="MMaps.AVLproofs.html#n:19"><span class="id" title="variable">n</span></a>))) <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> (<a class="idref" href="MMaps.AVLproofs.html#AvlProofs.LogDepth.mincard"><span class="id" title="definition">mincard</span></a> <a class="idref" href="MMaps.AVLproofs.html#n:19"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="MMaps.AVLproofs.html#AvlProofs.LogDepth.mincard"><span class="id" title="definition">mincard</span></a> (2<a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a><a class="idref" href="MMaps.AVLproofs.html#n:19"><span class="id" title="variable">n</span></a>)).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="AvlProofs.LogDepth.mincard_incr" class="idref" href="#AvlProofs.LogDepth.mincard_incr"><span class="id" title="lemma">mincard_incr</span></a> <a id="n:20" class="idref" href="#n:20"><span class="id" title="binder">n</span></a> : <a class="idref" href="MMaps.AVLproofs.html#AvlProofs.LogDepth.mincard"><span class="id" title="definition">mincard</span></a> <a class="idref" href="MMaps.AVLproofs.html#n:20"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Peano.html#::nat_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="MMaps.AVLproofs.html#AvlProofs.LogDepth.mincard"><span class="id" title="definition">mincard</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="MMaps.AVLproofs.html#n:20"><span class="id" title="variable">n</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">n</span> <span class="id" title="keyword">using</span> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Arith.Wf_nat.html#lt_wf_ind"><span class="id" title="lemma">lt_wf_ind</span></a>.<br/>
&nbsp;<span class="id" title="tactic">do</span> 3 (<span class="id" title="tactic">destruct</span> <span class="id" title="var">n</span>; <span class="id" title="tactic">auto</span>).<br/>
&nbsp;<span class="id" title="tactic">rewrite</span> 2 <a class="idref" href="MMaps.AVLproofs.html#AvlProofs.LogDepth.mincard_eqn"><span class="id" title="lemma">mincard_eqn</span></a>.<br/>
&nbsp;<span class="id" title="tactic">apply</span> → <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Arith.PeanoNat.html#Nat.succ_lt_mono"><span class="id" title="lemma">Nat.succ_lt_mono</span></a>.<br/>
&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Arith.PeanoNat.html#Nat.add_lt_mono"><span class="id" title="lemma">Nat.add_lt_mono</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="AvlProofs.LogDepth.mincard_lt_mono" class="idref" href="#AvlProofs.LogDepth.mincard_lt_mono"><span class="id" title="lemma">mincard_lt_mono</span></a> <a id="n:21" class="idref" href="#n:21"><span class="id" title="binder">n</span></a> <a id="m:22" class="idref" href="#m:22"><span class="id" title="binder">m</span></a> : <a class="idref" href="MMaps.AVLproofs.html#n:21"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Peano.html#::nat_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="MMaps.AVLproofs.html#m:22"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MMaps.AVLproofs.html#AvlProofs.LogDepth.mincard"><span class="id" title="definition">mincard</span></a> <a class="idref" href="MMaps.AVLproofs.html#n:21"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Peano.html#::nat_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="MMaps.AVLproofs.html#AvlProofs.LogDepth.mincard"><span class="id" title="definition">mincard</span></a> <a class="idref" href="MMaps.AVLproofs.html#m:22"><span class="id" title="variable">m</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">m</span>; <span class="id" title="tactic">inversion_clear</span> 1.<br/>
&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="MMaps.AVLproofs.html#AvlProofs.LogDepth.mincard_incr"><span class="id" title="lemma">mincard_incr</span></a>.<br/>
&nbsp;- <span class="id" title="tactic">transitivity</span> (<a class="idref" href="MMaps.AVLproofs.html#AvlProofs.LogDepth.mincard"><span class="id" title="definition">mincard</span></a> <span class="id" title="var">m</span>); <span class="id" title="tactic">auto</span> <span class="id" title="keyword">using</span> <a class="idref" href="MMaps.AVLproofs.html#AvlProofs.LogDepth.mincard_incr"><span class="id" title="lemma">mincard_incr</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="AvlProofs.LogDepth.mincard_le_mono" class="idref" href="#AvlProofs.LogDepth.mincard_le_mono"><span class="id" title="lemma">mincard_le_mono</span></a> <a id="n:23" class="idref" href="#n:23"><span class="id" title="binder">n</span></a> <a id="m:24" class="idref" href="#m:24"><span class="id" title="binder">m</span></a> : <a class="idref" href="MMaps.AVLproofs.html#n:23"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Peano.html#cb53cf0ee22c036a03b4a9281c68b5a3"><span class="id" title="notation">≤</span></a> <a class="idref" href="MMaps.AVLproofs.html#m:24"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MMaps.AVLproofs.html#AvlProofs.LogDepth.mincard"><span class="id" title="definition">mincard</span></a> <a class="idref" href="MMaps.AVLproofs.html#n:23"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Peano.html#cb53cf0ee22c036a03b4a9281c68b5a3"><span class="id" title="notation">≤</span></a> <a class="idref" href="MMaps.AVLproofs.html#AvlProofs.LogDepth.mincard"><span class="id" title="definition">mincard</span></a> <a class="idref" href="MMaps.AVLproofs.html#m:24"><span class="id" title="variable">m</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;<span class="id" title="tactic">induction</span> 1; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;<span class="id" title="tactic">transitivity</span> (<a class="idref" href="MMaps.AVLproofs.html#AvlProofs.LogDepth.mincard"><span class="id" title="definition">mincard</span></a> <span class="id" title="var">m</span>); <span class="id" title="tactic">auto</span> <span class="id" title="keyword">using</span> <a class="idref" href="MMaps.AVLproofs.html#AvlProofs.LogDepth.mincard_incr"><span class="id" title="lemma">mincard_incr</span></a> <span class="id" title="keyword">with</span> <span class="id" title="var">arith</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="AvlProofs.LogDepth.mincard_bound" class="idref" href="#AvlProofs.LogDepth.mincard_bound"><span class="id" title="lemma">mincard_bound</span></a> <a id="n:25" class="idref" href="#n:25"><span class="id" title="binder">n</span></a> <a id="m:26" class="idref" href="#m:26"><span class="id" title="binder">m</span></a> : <a class="idref" href="MMaps.AVLproofs.html#m:26"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Peano.html#cb53cf0ee22c036a03b4a9281c68b5a3"><span class="id" title="notation">≤</span></a> 2<a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a><a class="idref" href="MMaps.AVLproofs.html#n:25"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;<a class="idref" href="MMaps.AVLproofs.html#AvlProofs.LogDepth.mincard"><span class="id" title="definition">mincard</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="MMaps.AVLproofs.html#m:26"><span class="id" title="variable">m</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Peano.html#cb53cf0ee22c036a03b4a9281c68b5a3"><span class="id" title="notation">≤</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> (<a class="idref" href="MMaps.AVLproofs.html#AvlProofs.LogDepth.mincard"><span class="id" title="definition">mincard</span></a> <a class="idref" href="MMaps.AVLproofs.html#n:25"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="MMaps.AVLproofs.html#AvlProofs.LogDepth.mincard"><span class="id" title="definition">mincard</span></a> <a class="idref" href="MMaps.AVLproofs.html#m:26"><span class="id" title="variable">m</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">H</span>.<br/>
&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">m</span> <span class="id" title="keyword">as</span> [|[|<span class="id" title="var">m</span>]].<br/>
&nbsp;- <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">auto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">arith</span>.<br/>
&nbsp;- <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">auto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">arith</span>.<br/>
&nbsp;- <span class="id" title="tactic">rewrite</span> <a class="idref" href="MMaps.AVLproofs.html#AvlProofs.LogDepth.mincard_eqn"><span class="id" title="lemma">mincard_eqn</span></a>.<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> → <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Arith.PeanoNat.html#Nat.succ_le_mono"><span class="id" title="lemma">Nat.succ_le_mono</span></a>.<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Arith.PeanoNat.html#Nat.add_le_mono"><span class="id" title="lemma">Nat.add_le_mono</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="MMaps.AVLproofs.html#AvlProofs.LogDepth.mincard_le_mono"><span class="id" title="lemma">mincard_le_mono</span></a>; <span class="id" title="var">lia</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<span class="inlinecode"><a class="idref" href="MMaps.AVLproofs.html#AvlProofs.LogDepth.mincard"><span class="id" title="definition">mincard</span></a></span> has an exponential behavior 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <a id="AvlProofs.LogDepth.mincard_twice" class="idref" href="#AvlProofs.LogDepth.mincard_twice"><span class="id" title="lemma">mincard_twice</span></a> <a id="n:27" class="idref" href="#n:27"><span class="id" title="binder">n</span></a> : 2 <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Peano.html#ea2ff3d561159081cea6fb2e8113cc54"><span class="id" title="notation">×</span></a> <a class="idref" href="MMaps.AVLproofs.html#AvlProofs.LogDepth.mincard"><span class="id" title="definition">mincard</span></a> <a class="idref" href="MMaps.AVLproofs.html#n:27"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Peano.html#::nat_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="MMaps.AVLproofs.html#AvlProofs.LogDepth.mincard"><span class="id" title="definition">mincard</span></a> (2<a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a><a class="idref" href="MMaps.AVLproofs.html#n:27"><span class="id" title="variable">n</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">n</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">n</span> <span class="id" title="var">IH</span>] <span class="id" title="keyword">using</span> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Arith.Wf_nat.html#lt_wf_ind"><span class="id" title="lemma">lt_wf_ind</span></a>.<br/>
&nbsp;<span class="id" title="tactic">do</span> 3 (<span class="id" title="tactic">destruct</span> <span class="id" title="var">n</span>; [<span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">auto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">arith</span>|]).<br/>
&nbsp;<span class="id" title="tactic">change</span> (2 <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">n</span>))) <span class="id" title="keyword">with</span> (<a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> (2<a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a><span class="id" title="var">n</span>)))).<br/>
&nbsp;<span class="id" title="tactic">rewrite</span> 2 <a class="idref" href="MMaps.AVLproofs.html#AvlProofs.LogDepth.mincard_eqn"><span class="id" title="lemma">mincard_eqn</span></a>.<br/>
&nbsp;<span class="id" title="tactic">generalize</span> (<span class="id" title="var">IH</span> <span class="id" title="var">n</span>) (<span class="id" title="var">IH</span> (2<a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a><span class="id" title="var">n</span>)). <span class="id" title="var">lia</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="AvlProofs.LogDepth.mincard_even" class="idref" href="#AvlProofs.LogDepth.mincard_even"><span class="id" title="lemma">mincard_even</span></a> <a id="n:28" class="idref" href="#n:28"><span class="id" title="binder">n</span></a> : <a class="idref" href="MMaps.AVLproofs.html#n:28"><span class="id" title="variable">n</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x"><span class="id" title="notation">≠</span></a>0 <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> 2<a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Arith.PeanoNat.html#81fd94e251a61ee523cdd7855774ae7c"><span class="id" title="notation">^</span></a><a class="idref" href="MMaps.AVLproofs.html#n:28"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Peano.html#cb53cf0ee22c036a03b4a9281c68b5a3"><span class="id" title="notation">≤</span></a> <a class="idref" href="MMaps.AVLproofs.html#AvlProofs.LogDepth.mincard"><span class="id" title="definition">mincard</span></a> (2<a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Peano.html#ea2ff3d561159081cea6fb2e8113cc54"><span class="id" title="notation">×</span></a><a class="idref" href="MMaps.AVLproofs.html#n:28"><span class="id" title="variable">n</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">n</span>.<br/>
&nbsp;- <span class="id" title="var">now</span> <span class="id" title="tactic">destruct</span> 1.<br/>
&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">_</span>.<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Arith.PeanoNat.html#Nat.eq_dec"><span class="id" title="lemma">Nat.eq_dec</span></a> <span class="id" title="var">n</span> 0).<br/>
&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Arith.PeanoNat.html#Nat.pow_succ_r'"><span class="id" title="lemma">Nat.pow_succ_r'</span></a>, <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Arith.PeanoNat.html#Nat.mul_succ_r"><span class="id" title="lemma">Nat.mul_succ_r</span></a>, <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Arith.PeanoNat.html#Nat.add_comm"><span class="id" title="lemma">Nat.add_comm</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">transitivity</span> (2 <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Peano.html#ea2ff3d561159081cea6fb2e8113cc54"><span class="id" title="notation">×</span></a> <a class="idref" href="MMaps.AVLproofs.html#AvlProofs.LogDepth.mincard"><span class="id" title="definition">mincard</span></a> (2<a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Peano.html#ea2ff3d561159081cea6fb2e8113cc54"><span class="id" title="notation">×</span></a><span class="id" title="var">n</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Arith.PeanoNat.html#Nat.mul_le_mono_l"><span class="id" title="lemma">Nat.mul_le_mono_l</span></a>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Arith.PeanoNat.html#Nat.lt_le_incl"><span class="id" title="lemma">Nat.lt_le_incl</span></a>. <span class="id" title="tactic">apply</span> <a class="idref" href="MMaps.AVLproofs.html#AvlProofs.LogDepth.mincard_twice"><span class="id" title="lemma">mincard_twice</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="AvlProofs.LogDepth.mincard_odd" class="idref" href="#AvlProofs.LogDepth.mincard_odd"><span class="id" title="lemma">mincard_odd</span></a> <a id="n:29" class="idref" href="#n:29"><span class="id" title="binder">n</span></a> : 2<a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Arith.PeanoNat.html#81fd94e251a61ee523cdd7855774ae7c"><span class="id" title="notation">^</span></a><a class="idref" href="MMaps.AVLproofs.html#n:29"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Peano.html#cb53cf0ee22c036a03b4a9281c68b5a3"><span class="id" title="notation">≤</span></a> <a class="idref" href="MMaps.AVLproofs.html#AvlProofs.LogDepth.mincard"><span class="id" title="definition">mincard</span></a> (2<a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Peano.html#ea2ff3d561159081cea6fb2e8113cc54"><span class="id" title="notation">×</span></a><a class="idref" href="MMaps.AVLproofs.html#n:29"><span class="id" title="variable">n</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a>1).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Arith.PeanoNat.html#Nat.eq_dec"><span class="id" title="lemma">Nat.eq_dec</span></a> <span class="id" title="var">n</span> 0).<br/>
&nbsp;- <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;- <span class="id" title="tactic">transitivity</span> (<a class="idref" href="MMaps.AVLproofs.html#AvlProofs.LogDepth.mincard"><span class="id" title="definition">mincard</span></a> (2<a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Peano.html#ea2ff3d561159081cea6fb2e8113cc54"><span class="id" title="notation">×</span></a><span class="id" title="var">n</span>)).<br/>
&nbsp;&nbsp;&nbsp;× <span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <a class="idref" href="MMaps.AVLproofs.html#AvlProofs.LogDepth.mincard_even"><span class="id" title="lemma">mincard_even</span></a>.<br/>
&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">apply</span> <a class="idref" href="MMaps.AVLproofs.html#AvlProofs.LogDepth.mincard_le_mono"><span class="id" title="lemma">mincard_le_mono</span></a>. <span class="id" title="var">lia</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="AvlProofs.LogDepth.mincard_log" class="idref" href="#AvlProofs.LogDepth.mincard_log"><span class="id" title="lemma">mincard_log</span></a> <a id="n:30" class="idref" href="#n:30"><span class="id" title="binder">n</span></a> : <a class="idref" href="MMaps.AVLproofs.html#n:30"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Peano.html#cb53cf0ee22c036a03b4a9281c68b5a3"><span class="id" title="notation">≤</span></a> 2 <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Peano.html#ea2ff3d561159081cea6fb2e8113cc54"><span class="id" title="notation">×</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Arith.PeanoNat.html#Nat.log2"><span class="id" title="definition">Nat.log2</span></a> (<a class="idref" href="MMaps.AVLproofs.html#AvlProofs.LogDepth.mincard"><span class="id" title="definition">mincard</span></a> <a class="idref" href="MMaps.AVLproofs.html#n:30"><span class="id" title="variable">n</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> 1.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Arith.PeanoNat.html#Nat.div2_odd"><span class="id" title="lemma">Nat.div2_odd</span></a> <span class="id" title="var">n</span>).<br/>
&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">m</span> := <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Arith.PeanoNat.html#Nat.div2"><span class="id" title="definition">Nat.div2</span></a> <span class="id" title="var">n</span>); <span class="id" title="var">clearbody</span> <span class="id" title="var">m</span>.<br/>
&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Arith.PeanoNat.html#Nat.odd"><span class="id" title="definition">Nat.odd</span></a> <span class="id" title="var">n</span>); <span class="id" title="tactic">simpl</span> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Arith.PeanoNat.html#Nat.b2n"><span class="id" title="definition">Nat.b2n</span></a>; <span class="id" title="tactic">rewrite</span> ?<a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Arith.PeanoNat.html#Nat.add_0_r"><span class="id" title="lemma">Nat.add_0_r</span></a>; <span class="id" title="tactic">clear</span> <span class="id" title="var">n</span>.<br/>
&nbsp;+ <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Arith.PeanoNat.html#Nat.add_le_mono_r"><span class="id" title="lemma">Nat.add_le_mono_r</span></a>, <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Arith.PeanoNat.html#Nat.mul_le_mono_l"><span class="id" title="lemma">Nat.mul_le_mono_l</span></a>.<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Arith.PeanoNat.html#Nat.log2_le_pow2"><span class="id" title="lemma">Nat.log2_le_pow2</span></a>.<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (@<a class="idref" href="MMaps.AVLproofs.html#AvlProofs.LogDepth.mincard_lt_mono"><span class="id" title="lemma">mincard_lt_mono</span></a> 0); <span class="id" title="tactic">auto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">arith</span>.<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="MMaps.AVLproofs.html#AvlProofs.LogDepth.mincard_odd"><span class="id" title="lemma">mincard_odd</span></a>.<br/>
&nbsp;+ <span class="id" title="tactic">destruct</span> (<a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Arith.PeanoNat.html#Nat.eq_dec"><span class="id" title="lemma">Nat.eq_dec</span></a> <span class="id" title="var">m</span> 0); [<span class="id" title="tactic">subst</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">auto</span>|].<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">transitivity</span> (2<a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Peano.html#ea2ff3d561159081cea6fb2e8113cc54"><span class="id" title="notation">×</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Arith.PeanoNat.html#Nat.log2"><span class="id" title="definition">Nat.log2</span></a> (<a class="idref" href="MMaps.AVLproofs.html#AvlProofs.LogDepth.mincard"><span class="id" title="definition">mincard</span></a> (2<a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Peano.html#ea2ff3d561159081cea6fb2e8113cc54"><span class="id" title="notation">×</span></a><span class="id" title="var">m</span>))); [|<span class="id" title="var">lia</span>].<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Arith.PeanoNat.html#Nat.mul_le_mono_l"><span class="id" title="lemma">Nat.mul_le_mono_l</span></a>.<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Arith.PeanoNat.html#Nat.log2_le_pow2"><span class="id" title="lemma">Nat.log2_le_pow2</span></a>.<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (@<a class="idref" href="MMaps.AVLproofs.html#AvlProofs.LogDepth.mincard_lt_mono"><span class="id" title="lemma">mincard_lt_mono</span></a> 0); <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <a class="idref" href="MMaps.AVLproofs.html#AvlProofs.LogDepth.mincard_even"><span class="id" title="lemma">mincard_even</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
We now prove that <span class="inlinecode"><a class="idref" href="MMaps.AVLproofs.html#AvlProofs.LogDepth.mincard"><span class="id" title="definition">mincard</span></a></span> gives indeed a lower bound
    of the cardinal of AVL trees. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <a id="AvlProofs.LogDepth.maxdepth_heigth" class="idref" href="#AvlProofs.LogDepth.maxdepth_heigth"><span class="id" title="lemma">maxdepth_heigth</span></a> <a id="elt:31" class="idref" href="#elt:31"><span class="id" title="binder">elt</span></a> (<a id="s:32" class="idref" href="#s:32"><span class="id" title="binder">s</span></a>:<a class="idref" href="MMaps.AVLproofs.html#AvlProofs.t"><span class="id" title="definition">t</span></a> <a class="idref" href="MMaps.AVLproofs.html#elt:31"><span class="id" title="variable">elt</span></a>) : <a class="idref" href="MMaps.AVLproofs.html#AvlProofs.Avl"><span class="id" title="class">Avl</span></a> <a class="idref" href="MMaps.AVLproofs.html#s:32"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.ZArith.BinInt.html#Z.of_nat"><span class="id" title="definition">Z.of_nat</span></a> (<a class="idref" href="MMaps.AVLproofs.html#AvlProofs.maxdepth"><span class="id" title="definition">maxdepth</span></a> <a class="idref" href="MMaps.AVLproofs.html#s:32"><span class="id" title="variable">s</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MMaps.AVLproofs.html#I.i2z"><span class="id" title="axiom">i2z</span></a> (<a class="idref" href="MMaps.AVLproofs.html#AvlProofs.height"><span class="id" title="definition">height</span></a> <a class="idref" href="MMaps.AVLproofs.html#s:32"><span class="id" title="variable">s</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;<span class="id" title="tactic">induction</span> 1.<br/>
&nbsp;<span class="id" title="tactic">simpl</span>. <span class="id" title="var">lia_max</span>.<br/>
&nbsp;<span class="id" title="tactic">simpl</span> <a class="idref" href="MMaps.AVLproofs.html#AvlProofs.maxdepth"><span class="id" title="definition">maxdepth</span></a>. <span class="id" title="tactic">simpl</span> <a class="idref" href="MMaps.AVLproofs.html#AvlProofs.height"><span class="id" title="definition">height</span></a>. <span class="id" title="tactic">subst</span> <span class="id" title="var">h</span>.<br/>
&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.ZArith.Znat.html#Nat2Z.inj_succ"><span class="id" title="lemma">Nat2Z.inj_succ</span></a>, <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.ZArith.Znat.html#Nat2Z.inj_max"><span class="id" title="lemma">Nat2Z.inj_max</span></a>. <span class="id" title="var">lia_max</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="AvlProofs.LogDepth.mincard_maxdepth" class="idref" href="#AvlProofs.LogDepth.mincard_maxdepth"><span class="id" title="lemma">mincard_maxdepth</span></a> <a id="elt:33" class="idref" href="#elt:33"><span class="id" title="binder">elt</span></a> (<a id="s:34" class="idref" href="#s:34"><span class="id" title="binder">s</span></a>:<a class="idref" href="MMaps.AVLproofs.html#AvlProofs.t"><span class="id" title="definition">t</span></a> <a class="idref" href="MMaps.AVLproofs.html#elt:33"><span class="id" title="variable">elt</span></a>) :<br/>
&nbsp;<a class="idref" href="MMaps.AVLproofs.html#AvlProofs.Avl"><span class="id" title="class">Avl</span></a> <a class="idref" href="MMaps.AVLproofs.html#s:34"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MMaps.AVLproofs.html#AvlProofs.LogDepth.mincard"><span class="id" title="definition">mincard</span></a> (<a class="idref" href="MMaps.AVLproofs.html#AvlProofs.maxdepth"><span class="id" title="definition">maxdepth</span></a> <a class="idref" href="MMaps.AVLproofs.html#s:34"><span class="id" title="variable">s</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Peano.html#cb53cf0ee22c036a03b4a9281c68b5a3"><span class="id" title="notation">≤</span></a> <a class="idref" href="MMaps.AVLproofs.html#AvlProofs.cardinal"><span class="id" title="definition">cardinal</span></a> <a class="idref" href="MMaps.AVLproofs.html#s:34"><span class="id" title="variable">s</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;<span class="id" title="tactic">induction</span> 1.<br/>
&nbsp;- <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;- <span class="id" title="tactic">simpl</span> <a class="idref" href="MMaps.AVLproofs.html#AvlProofs.maxdepth"><span class="id" title="definition">maxdepth</span></a>. <span class="id" title="tactic">simpl</span> <a class="idref" href="MMaps.AVLproofs.html#AvlProofs.cardinal"><span class="id" title="definition">cardinal</span></a>. <span class="id" title="tactic">subst</span> <span class="id" title="var">h</span>.<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Arith.PeanoNat.html#Nat.max_spec"><span class="id" title="lemma">Nat.max_spec</span></a> (<a class="idref" href="MMaps.AVLproofs.html#AvlProofs.maxdepth"><span class="id" title="definition">maxdepth</span></a> <span class="id" title="var">l</span>) (<a class="idref" href="MMaps.AVLproofs.html#AvlProofs.maxdepth"><span class="id" title="definition">maxdepth</span></a> <span class="id" title="var">r</span>)) <span class="id" title="keyword">as</span> [(<span class="id" title="var">U</span>,-&gt;)|(<span class="id" title="var">U</span>,-&gt;)].<br/>
&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">rewrite</span> <a class="idref" href="MMaps.AVLproofs.html#AvlProofs.LogDepth.mincard_bound"><span class="id" title="lemma">mincard_bound</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> → <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Arith.PeanoNat.html#Nat.succ_le_mono"><span class="id" title="lemma">Nat.succ_le_mono</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Arith.PeanoNat.html#Nat.add_le_mono"><span class="id" title="lemma">Nat.add_le_mono</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.ZArith.Znat.html#Nat2Z.inj_le"><span class="id" title="lemma">Nat2Z.inj_le</span></a>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.ZArith.Znat.html#Nat2Z.inj_add"><span class="id" title="lemma">Nat2Z.inj_add</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> 2 <a class="idref" href="MMaps.AVLproofs.html#AvlProofs.LogDepth.maxdepth_heigth"><span class="id" title="lemma">maxdepth_heigth</span></a> <span class="id" title="tactic">by</span> <span class="id" title="tactic">auto</span>. <span class="id" title="tactic">simpl</span> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.ZArith.BinInt.html#Z.of_nat"><span class="id" title="definition">Z.of_nat</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">i2z</span>. <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Arith.PeanoNat.html#Nat.add_comm"><span class="id" title="lemma">Nat.add_comm</span></a>, <a class="idref" href="MMaps.AVLproofs.html#AvlProofs.LogDepth.mincard_bound"><span class="id" title="lemma">mincard_bound</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> → <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Arith.PeanoNat.html#Nat.succ_le_mono"><span class="id" title="lemma">Nat.succ_le_mono</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Arith.PeanoNat.html#Nat.add_le_mono"><span class="id" title="lemma">Nat.add_le_mono</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.ZArith.Znat.html#Nat2Z.inj_le"><span class="id" title="lemma">Nat2Z.inj_le</span></a>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.ZArith.Znat.html#Nat2Z.inj_add"><span class="id" title="lemma">Nat2Z.inj_add</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> 2 <a class="idref" href="MMaps.AVLproofs.html#AvlProofs.LogDepth.maxdepth_heigth"><span class="id" title="lemma">maxdepth_heigth</span></a> <span class="id" title="tactic">by</span> <span class="id" title="tactic">auto</span>. <span class="id" title="tactic">simpl</span> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.ZArith.BinInt.html#Z.of_nat"><span class="id" title="definition">Z.of_nat</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">i2z</span>. <span class="id" title="var">lia</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
We can now prove that the depth of an AVL tree is
    logarithmic in its size. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <a id="AvlProofs.LogDepth.maxdepth_upperbound" class="idref" href="#AvlProofs.LogDepth.maxdepth_upperbound"><span class="id" title="lemma">maxdepth_upperbound</span></a> <a id="elt:35" class="idref" href="#elt:35"><span class="id" title="binder">elt</span></a> (<a id="s:36" class="idref" href="#s:36"><span class="id" title="binder">s</span></a>:<a class="idref" href="MMaps.AVLproofs.html#AvlProofs.t"><span class="id" title="definition">t</span></a> <a class="idref" href="MMaps.AVLproofs.html#elt:35"><span class="id" title="variable">elt</span></a>) : <a class="idref" href="MMaps.AVLproofs.html#AvlProofs.Avl"><span class="id" title="class">Avl</span></a> <a class="idref" href="MMaps.AVLproofs.html#s:36"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;<a class="idref" href="MMaps.AVLproofs.html#AvlProofs.maxdepth"><span class="id" title="definition">maxdepth</span></a> <a class="idref" href="MMaps.AVLproofs.html#s:36"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Peano.html#cb53cf0ee22c036a03b4a9281c68b5a3"><span class="id" title="notation">≤</span></a> 2 <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Peano.html#ea2ff3d561159081cea6fb2e8113cc54"><span class="id" title="notation">×</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Arith.PeanoNat.html#Nat.log2"><span class="id" title="definition">Nat.log2</span></a> (<a class="idref" href="MMaps.AVLproofs.html#AvlProofs.cardinal"><span class="id" title="definition">cardinal</span></a> <a class="idref" href="MMaps.AVLproofs.html#s:36"><span class="id" title="variable">s</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> 1.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;<span class="id" title="tactic">transitivity</span> (2 <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Peano.html#ea2ff3d561159081cea6fb2e8113cc54"><span class="id" title="notation">×</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Arith.PeanoNat.html#Nat.log2"><span class="id" title="definition">Nat.log2</span></a> (<a class="idref" href="MMaps.AVLproofs.html#AvlProofs.LogDepth.mincard"><span class="id" title="definition">mincard</span></a> (<a class="idref" href="MMaps.AVLproofs.html#AvlProofs.maxdepth"><span class="id" title="definition">maxdepth</span></a> <span class="id" title="var">s</span>)) <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> 1).<br/>
&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="MMaps.AVLproofs.html#AvlProofs.LogDepth.mincard_log"><span class="id" title="lemma">mincard_log</span></a>.<br/>
&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Arith.PeanoNat.html#Nat.add_le_mono_r"><span class="id" title="lemma">Nat.add_le_mono_r</span></a>, <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Arith.PeanoNat.html#Nat.mul_le_mono_l"><span class="id" title="lemma">Nat.mul_le_mono_l</span></a>, <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Arith.PeanoNat.html#Nat.log2_le_mono"><span class="id" title="lemma">Nat.log2_le_mono</span></a>.<br/>
&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <a class="idref" href="MMaps.AVLproofs.html#AvlProofs.LogDepth.mincard_maxdepth"><span class="id" title="lemma">mincard_maxdepth</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="AvlProofs.LogDepth.maxdepth_lowerbound" class="idref" href="#AvlProofs.LogDepth.maxdepth_lowerbound"><span class="id" title="lemma">maxdepth_lowerbound</span></a> <a id="elt:37" class="idref" href="#elt:37"><span class="id" title="binder">elt</span></a> (<a id="s:38" class="idref" href="#s:38"><span class="id" title="binder">s</span></a>:<a class="idref" href="MMaps.AVLproofs.html#AvlProofs.t"><span class="id" title="definition">t</span></a> <a class="idref" href="MMaps.AVLproofs.html#elt:37"><span class="id" title="variable">elt</span></a>) : <a class="idref" href="MMaps.AVLproofs.html#s:38"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x"><span class="id" title="notation">≠</span></a><a class="idref" href="MMaps.AVLproofs.html#AvlProofs.Leaf"><span class="id" title="constructor">Leaf</span></a> <span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Arith.PeanoNat.html#Nat.log2"><span class="id" title="definition">Nat.log2</span></a> (<a class="idref" href="MMaps.AVLproofs.html#AvlProofs.cardinal"><span class="id" title="definition">cardinal</span></a> <a class="idref" href="MMaps.AVLproofs.html#s:38"><span class="id" title="variable">s</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Peano.html#::nat_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="MMaps.AVLproofs.html#AvlProofs.maxdepth"><span class="id" title="definition">maxdepth</span></a> <a class="idref" href="MMaps.AVLproofs.html#s:38"><span class="id" title="variable">s</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="MMaps.AVLproofs.html#AvlProofs.maxdepth_log_cardinal"><span class="id" title="lemma">maxdepth_log_cardinal</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="MMaps.AVLproofs.html#AvlProofs.LogDepth"><span class="id" title="module">LogDepth</span></a>.<br/>

<br/>
<span class="id" title="keyword">Section</span> <a id="AvlProofs.Elt" class="idref" href="#AvlProofs.Elt"><span class="id" title="section">Elt</span></a>.<br/>
<span class="id" title="keyword">Variable</span> <a id="AvlProofs.Elt.elt" class="idref" href="#AvlProofs.Elt.elt"><span class="id" title="variable">elt</span></a> : <span class="id" title="keyword">Type</span>.<br/>
<span class="id" title="keyword">Implicit</span> <span class="id" title="keyword">Type</span> <span class="id" title="var">t</span> <span class="id" title="var">s</span> <span class="id" title="var">l</span> <span class="id" title="var">r</span> : <a class="idref" href="MMaps.AVLproofs.html#AvlProofs.tree"><span class="id" title="inductive">tree</span></a> <a class="idref" href="MMaps.AVLproofs.html#AvlProofs.Elt.elt"><span class="id" title="variable">elt</span></a>.<br/>
<span class="id" title="keyword">Implicit</span> <span class="id" title="keyword">Type</span> <span class="id" title="var">e</span> <span class="id" title="var">v</span> : <a class="idref" href="MMaps.AVLproofs.html#AvlProofs.Elt.elt"><span class="id" title="variable">elt</span></a>.<br/>

<br/>
</div>

<div class="doc">
Tactics about <span class="inlinecode"><a class="idref" href="MMaps.AVLproofs.html#AvlProofs.avl"><span class="id" title="inductive">avl</span></a></span> 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <a id="AvlProofs.height_non_negative" class="idref" href="#AvlProofs.height_non_negative"><span class="id" title="lemma">height_non_negative</span></a> : <span class="id" title="keyword">∀</span> <a id="s:41" class="idref" href="#s:41"><span class="id" title="binder">s</span></a> `{<a id="Avl0:42" class="idref" href="#Avl0:42"><span class="id" title="binder">!</span></a><a id="Avl0:42" class="idref" href="#Avl0:42"><span class="id" title="binder">Avl</span></a> <a id="Avl0:42" class="idref" href="#Avl0:42"><span class="id" title="binder">s</span></a>}, <a class="idref" href="MMaps.AVLproofs.html#AvlProofs.height"><span class="id" title="definition">height</span></a> <a class="idref" href="MMaps.AVLproofs.html#s:41"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.ZArith.Int.html#e61b56094d6fe4522d92bd8635cc4b50"><span class="id" title="notation">≥</span></a> 0.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">s</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">auto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">zarith</span>.<br/>
&nbsp;<span class="id" title="var">inv_avl</span>; <span class="id" title="tactic">intuition</span>; <span class="id" title="var">lia_max</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
When <span class="inlinecode"><span class="id" title="var">H</span>:<a class="idref" href="MMaps.AVLproofs.html#AvlProofs.Avl"><span class="id" title="record">Avl</span></a></span> <span class="inlinecode"><span class="id" title="var">r</span></span>, typing <span class="inlinecode"><span class="id" title="var">avl_nn</span></span> <span class="inlinecode"><span class="id" title="var">H</span></span> adds <span class="inlinecode"><a class="idref" href="MMaps.AVL.html#MakeRaw.height"><span class="id" title="definition">height</span></a></span> <span class="inlinecode"><span class="id" title="var">r</span></span> <span class="inlinecode">≥</span> <span class="inlinecode">0</span> 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">avl_nn</span> <span class="id" title="var">H</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">nz</span> := <span class="id" title="tactic">fresh</span> "nz" <span class="id" title="tactic">in</span> <span class="id" title="tactic">assert</span> (<span class="id" title="var">nz</span> := @<a class="idref" href="MMaps.AVLproofs.html#AvlProofs.height_non_negative"><span class="id" title="lemma">height_non_negative</span></a> <span class="id" title="var">_</span> <span class="id" title="var">H</span>).<br/>

<br/>
<span class="comment">(*&nbsp;Repeat&nbsp;the&nbsp;previous&nbsp;tactic,&nbsp;clearing&nbsp;the&nbsp;<span class="inlinecode"><span class="id" title="var">Avl</span></span> <span class="inlinecode"><span class="id" title="var">_</span></span>&nbsp;hyps&nbsp;*)</span><br/>

<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">avl_nns</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">H</span>:<a class="idref" href="MMaps.AVLproofs.html#AvlProofs.Avl"><span class="id" title="class">Avl</span></a> <span class="id" title="var">_</span> |- <span class="id" title="var">_</span> ⇒ <span class="id" title="var">avl_nn</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">clear</span> <span class="id" title="var">H</span>; <span class="id" title="var">avl_nns</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span> ⇒ <span class="id" title="tactic">idtac</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
</div>

<div class="doc">
Results about <span class="inlinecode"><a class="idref" href="MMaps.AVL.html#MakeRaw.height"><span class="id" title="definition">height</span></a></span> 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <a id="AvlProofs.height_0" class="idref" href="#AvlProofs.height_0"><span class="id" title="lemma">height_0</span></a> : <span class="id" title="keyword">∀</span> <a id="s:43" class="idref" href="#s:43"><span class="id" title="binder">s</span></a> `{<a id="Avl0:44" class="idref" href="#Avl0:44"><span class="id" title="binder">!</span></a><a id="Avl0:44" class="idref" href="#Avl0:44"><span class="id" title="binder">Avl</span></a> <a id="Avl0:44" class="idref" href="#Avl0:44"><span class="id" title="binder">s</span></a>}, <a class="idref" href="MMaps.AVLproofs.html#AvlProofs.height"><span class="id" title="definition">height</span></a> <a class="idref" href="MMaps.AVLproofs.html#s:43"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> 0 <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MMaps.AVLproofs.html#s:43"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MMaps.AVLproofs.html#AvlProofs.Leaf"><span class="id" title="constructor">Leaf</span></a> <span class="id" title="var">_</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;<span class="id" title="tactic">destruct</span> 1; <span class="id" title="var">avl2Avl</span>; <span class="id" title="tactic">intuition</span>; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;<span class="id" title="var">avl_nns</span>. <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *; <span class="id" title="var">exfalso</span>; <span class="id" title="var">lia_max</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
Results about <span class="inlinecode"><a class="idref" href="MMaps.AVLproofs.html#AvlProofs.avl"><span class="id" title="inductive">avl</span></a></span> 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <a id="AvlProofs.avl_node" class="idref" href="#AvlProofs.avl_node"><span class="id" title="lemma">avl_node</span></a> :<br/>
&nbsp;<span class="id" title="keyword">∀</span> <a id="x:45" class="idref" href="#x:45"><span class="id" title="binder">x</span></a> <a id="e:46" class="idref" href="#e:46"><span class="id" title="binder">e</span></a> <a id="l:47" class="idref" href="#l:47"><span class="id" title="binder">l</span></a> <a id="r:48" class="idref" href="#r:48"><span class="id" title="binder">r</span></a> `{<a id="Avl0:49" class="idref" href="#Avl0:49"><span class="id" title="binder">!</span></a><a id="Avl0:49" class="idref" href="#Avl0:49"><span class="id" title="binder">Avl</span></a> <a id="Avl0:49" class="idref" href="#Avl0:49"><span class="id" title="binder">l</span></a>, <a id="Avl1:50" class="idref" href="#Avl1:50"><span class="id" title="binder">!</span></a><a id="Avl1:50" class="idref" href="#Avl1:50"><span class="id" title="binder">Avl</span></a> <a id="Avl1:50" class="idref" href="#Avl1:50"><span class="id" title="binder">r</span></a>},<br/>
&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.ZArith.Int.html#Int.::Int_scope:'-'_x"><span class="id" title="notation">-</span></a>(2) <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.ZArith.Int.html#be4c59c76b318250400dadb817b41e75"><span class="id" title="notation">≤</span></a> <a class="idref" href="MMaps.AVLproofs.html#AvlProofs.height"><span class="id" title="definition">height</span></a> <a class="idref" href="MMaps.AVLproofs.html#l:47"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.ZArith.Int.html#Int.::Int_scope:x_'-'_x"><span class="id" title="notation">-</span></a> <a class="idref" href="MMaps.AVLproofs.html#AvlProofs.height"><span class="id" title="definition">height</span></a> <a class="idref" href="MMaps.AVLproofs.html#r:48"><span class="id" title="variable">r</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.ZArith.Int.html#be4c59c76b318250400dadb817b41e75"><span class="id" title="notation">≤</span></a> 2 <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;<a class="idref" href="MMaps.AVLproofs.html#AvlProofs.Avl"><span class="id" title="class">Avl</span></a> (<a class="idref" href="MMaps.AVLproofs.html#AvlProofs.Node"><span class="id" title="constructor">Node</span></a> (<a class="idref" href="MMaps.AVLproofs.html#I.max"><span class="id" title="axiom">max</span></a> (<a class="idref" href="MMaps.AVLproofs.html#AvlProofs.height"><span class="id" title="definition">height</span></a> <a class="idref" href="MMaps.AVLproofs.html#l:47"><span class="id" title="variable">l</span></a>) (<a class="idref" href="MMaps.AVLproofs.html#AvlProofs.height"><span class="id" title="definition">height</span></a> <a class="idref" href="MMaps.AVLproofs.html#r:48"><span class="id" title="variable">r</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.ZArith.Int.html#004c359642fbe9dbd252a6335642f93a"><span class="id" title="notation">+</span></a> 1) <a class="idref" href="MMaps.AVLproofs.html#l:47"><span class="id" title="variable">l</span></a> <a class="idref" href="MMaps.AVLproofs.html#x:45"><span class="id" title="variable">x</span></a> <a class="idref" href="MMaps.AVLproofs.html#e:46"><span class="id" title="variable">e</span></a> <a class="idref" href="MMaps.AVLproofs.html#r:48"><span class="id" title="variable">r</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">autok</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">Local Hint Resolve</span> <span class="id" title="var">avl_node</span> : <span class="id" title="var">map</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab108"></a><h2 class="section">The AVL invariant is preserved by set operations</h2>

<div class="paragraph"> </div>

 empty 
</div>
<div class="code">

<br/>
#[<span class="id" title="var">export</span>] <span class="id" title="keyword">Instance</span> <a id="AvlProofs.empty_avl" class="idref" href="#AvlProofs.empty_avl"><span class="id" title="instance">empty_avl</span></a> : <a class="idref" href="MMaps.AVLproofs.html#AvlProofs.Avl"><span class="id" title="class">Avl</span></a> (<a class="idref" href="MMaps.AVLproofs.html#AvlProofs.empty"><span class="id" title="definition">empty</span></a> <a class="idref" href="MMaps.AVLproofs.html#AvlProofs.Elt.elt"><span class="id" title="variable">elt</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;<span class="id" title="var">autok</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
singleton 
</div>
<div class="code">

<br/>
#[<span class="id" title="var">export</span>] <span class="id" title="keyword">Instance</span> <a id="AvlProofs.singleton_avl" class="idref" href="#AvlProofs.singleton_avl"><span class="id" title="instance">singleton_avl</span></a> <a id="x:51" class="idref" href="#x:51"><span class="id" title="binder">x</span></a> <a id="e:52" class="idref" href="#e:52"><span class="id" title="binder">e</span></a> : <a class="idref" href="MMaps.AVLproofs.html#AvlProofs.Avl"><span class="id" title="class">Avl</span></a> (<a class="idref" href="MMaps.AVLproofs.html#AvlProofs.singleton"><span class="id" title="definition">singleton</span></a> <a class="idref" href="MMaps.AVLproofs.html#x:51"><span class="id" title="variable">x</span></a> <a class="idref" href="MMaps.AVLproofs.html#e:52"><span class="id" title="variable">e</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="MMaps.AVLproofs.html#AvlProofs.singleton"><span class="id" title="definition">singleton</span></a>. <span class="id" title="tactic">constructor</span>; <span class="id" title="var">autom</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="var">lia_max</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
create 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <a id="AvlProofs.create_avl" class="idref" href="#AvlProofs.create_avl"><span class="id" title="lemma">create_avl</span></a> :<br/>
&nbsp;<span class="id" title="keyword">∀</span> <a id="l:53" class="idref" href="#l:53"><span class="id" title="binder">l</span></a> <a id="x:54" class="idref" href="#x:54"><span class="id" title="binder">x</span></a> <a id="e:55" class="idref" href="#e:55"><span class="id" title="binder">e</span></a> <a id="r:56" class="idref" href="#r:56"><span class="id" title="binder">r</span></a> `{<a id="Avl0:57" class="idref" href="#Avl0:57"><span class="id" title="binder">!</span></a><a id="Avl0:57" class="idref" href="#Avl0:57"><span class="id" title="binder">Avl</span></a> <a id="Avl0:57" class="idref" href="#Avl0:57"><span class="id" title="binder">l</span></a>, <a id="Avl1:58" class="idref" href="#Avl1:58"><span class="id" title="binder">!</span></a><a id="Avl1:58" class="idref" href="#Avl1:58"><span class="id" title="binder">Avl</span></a> <a id="Avl1:58" class="idref" href="#Avl1:58"><span class="id" title="binder">r</span></a>},<br/>
&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.ZArith.Int.html#Int.::Int_scope:'-'_x"><span class="id" title="notation">-</span></a>(2) <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.ZArith.Int.html#be4c59c76b318250400dadb817b41e75"><span class="id" title="notation">≤</span></a> <a class="idref" href="MMaps.AVLproofs.html#AvlProofs.height"><span class="id" title="definition">height</span></a> <a class="idref" href="MMaps.AVLproofs.html#l:53"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.ZArith.Int.html#Int.::Int_scope:x_'-'_x"><span class="id" title="notation">-</span></a> <a class="idref" href="MMaps.AVLproofs.html#AvlProofs.height"><span class="id" title="definition">height</span></a> <a class="idref" href="MMaps.AVLproofs.html#r:56"><span class="id" title="variable">r</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.ZArith.Int.html#be4c59c76b318250400dadb817b41e75"><span class="id" title="notation">≤</span></a> 2 <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;<a class="idref" href="MMaps.AVLproofs.html#AvlProofs.Avl"><span class="id" title="class">Avl</span></a> (<a class="idref" href="MMaps.AVLproofs.html#AvlProofs.create"><span class="id" title="definition">create</span></a> <a class="idref" href="MMaps.AVLproofs.html#l:53"><span class="id" title="variable">l</span></a> <a class="idref" href="MMaps.AVLproofs.html#x:54"><span class="id" title="variable">x</span></a> <a class="idref" href="MMaps.AVLproofs.html#e:55"><span class="id" title="variable">e</span></a> <a class="idref" href="MMaps.AVLproofs.html#r:56"><span class="id" title="variable">r</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="MMaps.AVLproofs.html#AvlProofs.create"><span class="id" title="definition">create</span></a>; <span class="id" title="var">autom</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="AvlProofs.create_height" class="idref" href="#AvlProofs.create_height"><span class="id" title="lemma">create_height</span></a> :<br/>
&nbsp;<span class="id" title="keyword">∀</span> <a id="l:59" class="idref" href="#l:59"><span class="id" title="binder">l</span></a> <a id="x:60" class="idref" href="#x:60"><span class="id" title="binder">x</span></a> <a id="e:61" class="idref" href="#e:61"><span class="id" title="binder">e</span></a> <a id="r:62" class="idref" href="#r:62"><span class="id" title="binder">r</span></a> `{<a id="Avl0:63" class="idref" href="#Avl0:63"><span class="id" title="binder">!</span></a><a id="Avl0:63" class="idref" href="#Avl0:63"><span class="id" title="binder">Avl</span></a> <a id="Avl0:63" class="idref" href="#Avl0:63"><span class="id" title="binder">l</span></a>, <a id="Avl1:64" class="idref" href="#Avl1:64"><span class="id" title="binder">!</span></a><a id="Avl1:64" class="idref" href="#Avl1:64"><span class="id" title="binder">Avl</span></a> <a id="Avl1:64" class="idref" href="#Avl1:64"><span class="id" title="binder">r</span></a>},<br/>
&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.ZArith.Int.html#Int.::Int_scope:'-'_x"><span class="id" title="notation">-</span></a>(2) <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.ZArith.Int.html#be4c59c76b318250400dadb817b41e75"><span class="id" title="notation">≤</span></a> <a class="idref" href="MMaps.AVLproofs.html#AvlProofs.height"><span class="id" title="definition">height</span></a> <a class="idref" href="MMaps.AVLproofs.html#l:59"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.ZArith.Int.html#Int.::Int_scope:x_'-'_x"><span class="id" title="notation">-</span></a> <a class="idref" href="MMaps.AVLproofs.html#AvlProofs.height"><span class="id" title="definition">height</span></a> <a class="idref" href="MMaps.AVLproofs.html#r:62"><span class="id" title="variable">r</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.ZArith.Int.html#be4c59c76b318250400dadb817b41e75"><span class="id" title="notation">≤</span></a> 2 <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;<a class="idref" href="MMaps.AVLproofs.html#AvlProofs.height"><span class="id" title="definition">height</span></a> (<a class="idref" href="MMaps.AVLproofs.html#AvlProofs.create"><span class="id" title="definition">create</span></a> <a class="idref" href="MMaps.AVLproofs.html#l:59"><span class="id" title="variable">l</span></a> <a class="idref" href="MMaps.AVLproofs.html#x:60"><span class="id" title="variable">x</span></a> <a class="idref" href="MMaps.AVLproofs.html#e:61"><span class="id" title="variable">e</span></a> <a class="idref" href="MMaps.AVLproofs.html#r:62"><span class="id" title="variable">r</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MMaps.AVLproofs.html#I.max"><span class="id" title="axiom">max</span></a> (<a class="idref" href="MMaps.AVLproofs.html#AvlProofs.height"><span class="id" title="definition">height</span></a> <a class="idref" href="MMaps.AVLproofs.html#l:59"><span class="id" title="variable">l</span></a>) (<a class="idref" href="MMaps.AVLproofs.html#AvlProofs.height"><span class="id" title="definition">height</span></a> <a class="idref" href="MMaps.AVLproofs.html#r:62"><span class="id" title="variable">r</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.ZArith.Int.html#004c359642fbe9dbd252a6335642f93a"><span class="id" title="notation">+</span></a> 1.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="MMaps.AVLproofs.html#AvlProofs.create"><span class="id" title="definition">create</span></a>; <span class="id" title="var">autom</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
bal 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">when</span> <span class="id" title="var">f</span> :=<br/>
&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span> |- <span class="id" title="keyword">context</span> [<span class="id" title="var">f</span>] ⇒ <span class="id" title="tactic">idtac</span> | <span class="id" title="var">_</span> ⇒ <span class="id" title="tactic">fail</span> <span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="AvlProofs.bal_avl" class="idref" href="#AvlProofs.bal_avl"><span class="id" title="lemma">bal_avl</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <a id="l:65" class="idref" href="#l:65"><span class="id" title="binder">l</span></a> <a id="x:66" class="idref" href="#x:66"><span class="id" title="binder">x</span></a> <a id="e:67" class="idref" href="#e:67"><span class="id" title="binder">e</span></a> <a id="r:68" class="idref" href="#r:68"><span class="id" title="binder">r</span></a> `{<a id="Avl0:69" class="idref" href="#Avl0:69"><span class="id" title="binder">!</span></a><a id="Avl0:69" class="idref" href="#Avl0:69"><span class="id" title="binder">Avl</span></a> <a id="Avl0:69" class="idref" href="#Avl0:69"><span class="id" title="binder">l</span></a>, <a id="Avl1:70" class="idref" href="#Avl1:70"><span class="id" title="binder">!</span></a><a id="Avl1:70" class="idref" href="#Avl1:70"><span class="id" title="binder">Avl</span></a> <a id="Avl1:70" class="idref" href="#Avl1:70"><span class="id" title="binder">r</span></a>},<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.ZArith.Int.html#Int.::Int_scope:'-'_x"><span class="id" title="notation">-</span></a>(3) <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.ZArith.Int.html#be4c59c76b318250400dadb817b41e75"><span class="id" title="notation">≤</span></a> <a class="idref" href="MMaps.AVLproofs.html#AvlProofs.height"><span class="id" title="definition">height</span></a> <a class="idref" href="MMaps.AVLproofs.html#l:65"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.ZArith.Int.html#Int.::Int_scope:x_'-'_x"><span class="id" title="notation">-</span></a> <a class="idref" href="MMaps.AVLproofs.html#AvlProofs.height"><span class="id" title="definition">height</span></a> <a class="idref" href="MMaps.AVLproofs.html#r:68"><span class="id" title="variable">r</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.ZArith.Int.html#be4c59c76b318250400dadb817b41e75"><span class="id" title="notation">≤</span></a> 3 <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MMaps.AVLproofs.html#AvlProofs.Avl"><span class="id" title="class">Avl</span></a> (<a class="idref" href="MMaps.AVLproofs.html#AvlProofs.bal"><span class="id" title="definition">bal</span></a> <a class="idref" href="MMaps.AVLproofs.html#l:65"><span class="id" title="variable">l</span></a> <a class="idref" href="MMaps.AVLproofs.html#x:66"><span class="id" title="variable">x</span></a> <a class="idref" href="MMaps.AVLproofs.html#e:67"><span class="id" title="variable">e</span></a> <a class="idref" href="MMaps.AVLproofs.html#r:68"><span class="id" title="variable">r</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">l</span> <span class="id" title="var">x</span> <span class="id" title="var">e</span> <span class="id" title="var">r</span>; <span class="id" title="var">functional</span> <span class="id" title="tactic">induction</span> (<a class="idref" href="MMaps.AVLproofs.html#AvlProofs.bal"><span class="id" title="definition">bal</span></a> <span class="id" title="var">l</span> <span class="id" title="var">x</span> <span class="id" title="var">e</span> <span class="id" title="var">r</span>); <span class="id" title="tactic">intros</span>; <span class="id" title="var">clearf</span>;<br/>
&nbsp;<span class="id" title="var">inv_avl</span>; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">try</span> (<span class="id" title="var">when</span> <a class="idref" href="MMaps.AVLproofs.html#AvlProofs.assert_false"><span class="id" title="definition">assert_false</span></a>; <span class="id" title="var">avl_nns</span>);<br/>
&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">apply</span> <a class="idref" href="MMaps.AVLproofs.html#AvlProofs.create_avl"><span class="id" title="lemma">create_avl</span></a>; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">auto</span>; <span class="id" title="var">lia_max</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="AvlProofs.bal_height_1" class="idref" href="#AvlProofs.bal_height_1"><span class="id" title="lemma">bal_height_1</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <a id="l:71" class="idref" href="#l:71"><span class="id" title="binder">l</span></a> <a id="x:72" class="idref" href="#x:72"><span class="id" title="binder">x</span></a> <a id="e:73" class="idref" href="#e:73"><span class="id" title="binder">e</span></a> <a id="r:74" class="idref" href="#r:74"><span class="id" title="binder">r</span></a> `{<a id="Avl0:75" class="idref" href="#Avl0:75"><span class="id" title="binder">!</span></a><a id="Avl0:75" class="idref" href="#Avl0:75"><span class="id" title="binder">Avl</span></a> <a id="Avl0:75" class="idref" href="#Avl0:75"><span class="id" title="binder">l</span></a>, <a id="Avl1:76" class="idref" href="#Avl1:76"><span class="id" title="binder">!</span></a><a id="Avl1:76" class="idref" href="#Avl1:76"><span class="id" title="binder">Avl</span></a> <a id="Avl1:76" class="idref" href="#Avl1:76"><span class="id" title="binder">r</span></a>},<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.ZArith.Int.html#Int.::Int_scope:'-'_x"><span class="id" title="notation">-</span></a>(3) <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.ZArith.Int.html#be4c59c76b318250400dadb817b41e75"><span class="id" title="notation">≤</span></a> <a class="idref" href="MMaps.AVLproofs.html#AvlProofs.height"><span class="id" title="definition">height</span></a> <a class="idref" href="MMaps.AVLproofs.html#l:71"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.ZArith.Int.html#Int.::Int_scope:x_'-'_x"><span class="id" title="notation">-</span></a> <a class="idref" href="MMaps.AVLproofs.html#AvlProofs.height"><span class="id" title="definition">height</span></a> <a class="idref" href="MMaps.AVLproofs.html#r:74"><span class="id" title="variable">r</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.ZArith.Int.html#be4c59c76b318250400dadb817b41e75"><span class="id" title="notation">≤</span></a> 3 <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;0 <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.ZArith.Int.html#be4c59c76b318250400dadb817b41e75"><span class="id" title="notation">≤</span></a> <a class="idref" href="MMaps.AVLproofs.html#AvlProofs.height"><span class="id" title="definition">height</span></a> (<a class="idref" href="MMaps.AVLproofs.html#AvlProofs.bal"><span class="id" title="definition">bal</span></a> <a class="idref" href="MMaps.AVLproofs.html#l:71"><span class="id" title="variable">l</span></a> <a class="idref" href="MMaps.AVLproofs.html#x:72"><span class="id" title="variable">x</span></a> <a class="idref" href="MMaps.AVLproofs.html#e:73"><span class="id" title="variable">e</span></a> <a class="idref" href="MMaps.AVLproofs.html#r:74"><span class="id" title="variable">r</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.ZArith.Int.html#Int.::Int_scope:x_'-'_x"><span class="id" title="notation">-</span></a> <a class="idref" href="MMaps.AVLproofs.html#I.max"><span class="id" title="axiom">max</span></a> (<a class="idref" href="MMaps.AVLproofs.html#AvlProofs.height"><span class="id" title="definition">height</span></a> <a class="idref" href="MMaps.AVLproofs.html#l:71"><span class="id" title="variable">l</span></a>) (<a class="idref" href="MMaps.AVLproofs.html#AvlProofs.height"><span class="id" title="definition">height</span></a> <a class="idref" href="MMaps.AVLproofs.html#r:74"><span class="id" title="variable">r</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.ZArith.Int.html#be4c59c76b318250400dadb817b41e75"><span class="id" title="notation">≤</span></a> 1.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">l</span> <span class="id" title="var">x</span> <span class="id" title="var">e</span> <span class="id" title="var">r</span>; <span class="id" title="var">functional</span> <span class="id" title="tactic">induction</span> (<a class="idref" href="MMaps.AVLproofs.html#AvlProofs.bal"><span class="id" title="definition">bal</span></a> <span class="id" title="var">l</span> <span class="id" title="var">x</span> <span class="id" title="var">e</span> <span class="id" title="var">r</span>); <span class="id" title="tactic">intros</span>; <span class="id" title="var">clearf</span>;<br/>
&nbsp;<span class="id" title="var">inv_avl</span>; <span class="id" title="var">avl_nns</span>; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *; <span class="id" title="var">lia_max</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="AvlProofs.bal_height_2" class="idref" href="#AvlProofs.bal_height_2"><span class="id" title="lemma">bal_height_2</span></a> :<br/>
&nbsp;<span class="id" title="keyword">∀</span> <a id="l:77" class="idref" href="#l:77"><span class="id" title="binder">l</span></a> <a id="x:78" class="idref" href="#x:78"><span class="id" title="binder">x</span></a> <a id="e:79" class="idref" href="#e:79"><span class="id" title="binder">e</span></a> <a id="r:80" class="idref" href="#r:80"><span class="id" title="binder">r</span></a> `{<a id="Avl0:81" class="idref" href="#Avl0:81"><span class="id" title="binder">!</span></a><a id="Avl0:81" class="idref" href="#Avl0:81"><span class="id" title="binder">Avl</span></a> <a id="Avl0:81" class="idref" href="#Avl0:81"><span class="id" title="binder">l</span></a>, <a id="Avl1:82" class="idref" href="#Avl1:82"><span class="id" title="binder">!</span></a><a id="Avl1:82" class="idref" href="#Avl1:82"><span class="id" title="binder">Avl</span></a> <a id="Avl1:82" class="idref" href="#Avl1:82"><span class="id" title="binder">r</span></a>},<br/>
&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.ZArith.Int.html#Int.::Int_scope:'-'_x"><span class="id" title="notation">-</span></a>(2) <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.ZArith.Int.html#be4c59c76b318250400dadb817b41e75"><span class="id" title="notation">≤</span></a> <a class="idref" href="MMaps.AVLproofs.html#AvlProofs.height"><span class="id" title="definition">height</span></a> <a class="idref" href="MMaps.AVLproofs.html#l:77"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.ZArith.Int.html#Int.::Int_scope:x_'-'_x"><span class="id" title="notation">-</span></a> <a class="idref" href="MMaps.AVLproofs.html#AvlProofs.height"><span class="id" title="definition">height</span></a> <a class="idref" href="MMaps.AVLproofs.html#r:80"><span class="id" title="variable">r</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.ZArith.Int.html#be4c59c76b318250400dadb817b41e75"><span class="id" title="notation">≤</span></a> 2 <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;<a class="idref" href="MMaps.AVLproofs.html#AvlProofs.height"><span class="id" title="definition">height</span></a> (<a class="idref" href="MMaps.AVLproofs.html#AvlProofs.bal"><span class="id" title="definition">bal</span></a> <a class="idref" href="MMaps.AVLproofs.html#l:77"><span class="id" title="variable">l</span></a> <a class="idref" href="MMaps.AVLproofs.html#x:78"><span class="id" title="variable">x</span></a> <a class="idref" href="MMaps.AVLproofs.html#e:79"><span class="id" title="variable">e</span></a> <a class="idref" href="MMaps.AVLproofs.html#r:80"><span class="id" title="variable">r</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.ZArith.Int.html#2d072df30850000b50979c72a9f0a47e"><span class="id" title="notation">==</span></a> <a class="idref" href="MMaps.AVLproofs.html#I.max"><span class="id" title="axiom">max</span></a> (<a class="idref" href="MMaps.AVLproofs.html#AvlProofs.height"><span class="id" title="definition">height</span></a> <a class="idref" href="MMaps.AVLproofs.html#l:77"><span class="id" title="variable">l</span></a>) (<a class="idref" href="MMaps.AVLproofs.html#AvlProofs.height"><span class="id" title="definition">height</span></a> <a class="idref" href="MMaps.AVLproofs.html#r:80"><span class="id" title="variable">r</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.ZArith.Int.html#004c359642fbe9dbd252a6335642f93a"><span class="id" title="notation">+</span></a>1.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">l</span> <span class="id" title="var">x</span> <span class="id" title="var">e</span> <span class="id" title="var">r</span>; <span class="id" title="var">functional</span> <span class="id" title="tactic">induction</span> (<a class="idref" href="MMaps.AVLproofs.html#AvlProofs.bal"><span class="id" title="definition">bal</span></a> <span class="id" title="var">l</span> <span class="id" title="var">x</span> <span class="id" title="var">e</span> <span class="id" title="var">r</span>); <span class="id" title="tactic">intros</span>; <span class="id" title="var">clearf</span>;<br/>
&nbsp;<span class="id" title="var">inv_avl</span>; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *; <span class="id" title="var">lia_max</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">lia_bal</span> := <span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <span class="id" title="var">Hl</span>:<a class="idref" href="MMaps.AVLproofs.html#AvlProofs.Avl"><span class="id" title="class">Avl</span></a> ?<span class="id" title="var">l</span>, <span class="id" title="var">Hr</span>:<a class="idref" href="MMaps.AVLproofs.html#AvlProofs.Avl"><span class="id" title="class">Avl</span></a> ?<span class="id" title="var">r</span> |- <span class="id" title="keyword">context</span> [ <a class="idref" href="MMaps.AVLproofs.html#AvlProofs.bal"><span class="id" title="definition">bal</span></a> ?<span class="id" title="var">l</span> ?<span class="id" title="var">x</span> ?<span class="id" title="var">e</span> ?<span class="id" title="var">r</span> ] ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> (@<a class="idref" href="MMaps.AVLproofs.html#AvlProofs.bal_height_1"><span class="id" title="lemma">bal_height_1</span></a> <span class="id" title="var">l</span> <span class="id" title="var">x</span> <span class="id" title="var">e</span> <span class="id" title="var">r</span> <span class="id" title="var">Hl</span> <span class="id" title="var">Hr</span>) (@<a class="idref" href="MMaps.AVLproofs.html#AvlProofs.bal_height_2"><span class="id" title="lemma">bal_height_2</span></a> <span class="id" title="var">l</span> <span class="id" title="var">x</span> <span class="id" title="var">e</span> <span class="id" title="var">r</span> <span class="id" title="var">Hl</span> <span class="id" title="var">Hr</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">lia_max</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
</div>

<div class="doc">
add 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">induct</span> <span class="id" title="var">m</span> :=<br/>
&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">m</span> <span class="id" title="keyword">as</span> [|<span class="id" title="var">i</span> <span class="id" title="var">l</span> <span class="id" title="var">IHl</span> <span class="id" title="var">x'</span> <span class="id" title="var">e'</span> <span class="id" title="var">r</span> <span class="id" title="var">IHr</span>]; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">intros</span>;<br/>
&nbsp;[|<span class="id" title="tactic">case</span> <a class="idref" href="MMaps.AVLproofs.html#X.compare_spec"><span class="id" title="axiom">X.compare_spec</span></a>; <span class="id" title="tactic">intros</span>].<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="AvlProofs.add_avl_1" class="idref" href="#AvlProofs.add_avl_1"><span class="id" title="lemma">add_avl_1</span></a> : <span class="id" title="keyword">∀</span> <a id="s:83" class="idref" href="#s:83"><span class="id" title="binder">s</span></a> <a id="x:84" class="idref" href="#x:84"><span class="id" title="binder">x</span></a> <a id="e:85" class="idref" href="#e:85"><span class="id" title="binder">e</span></a> `{<a id="Avl0:86" class="idref" href="#Avl0:86"><span class="id" title="binder">!</span></a><a id="Avl0:86" class="idref" href="#Avl0:86"><span class="id" title="binder">Avl</span></a> <a id="Avl0:86" class="idref" href="#Avl0:86"><span class="id" title="binder">s</span></a>},<br/>
&nbsp;<a class="idref" href="MMaps.AVLproofs.html#AvlProofs.Avl"><span class="id" title="class">Avl</span></a> (<a class="idref" href="MMaps.AVLproofs.html#AvlProofs.add"><span class="id" title="definition">add</span></a> <a class="idref" href="MMaps.AVLproofs.html#x:84"><span class="id" title="variable">x</span></a> <a class="idref" href="MMaps.AVLproofs.html#e:85"><span class="id" title="variable">e</span></a> <a class="idref" href="MMaps.AVLproofs.html#s:83"><span class="id" title="variable">s</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">∧</span></a> 0 <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.ZArith.Int.html#be4c59c76b318250400dadb817b41e75"><span class="id" title="notation">≤</span></a> <a class="idref" href="MMaps.AVLproofs.html#AvlProofs.height"><span class="id" title="definition">height</span></a> (<a class="idref" href="MMaps.AVLproofs.html#AvlProofs.add"><span class="id" title="definition">add</span></a> <a class="idref" href="MMaps.AVLproofs.html#x:84"><span class="id" title="variable">x</span></a> <a class="idref" href="MMaps.AVLproofs.html#e:85"><span class="id" title="variable">e</span></a> <a class="idref" href="MMaps.AVLproofs.html#s:83"><span class="id" title="variable">s</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.ZArith.Int.html#Int.::Int_scope:x_'-'_x"><span class="id" title="notation">-</span></a> <a class="idref" href="MMaps.AVLproofs.html#AvlProofs.height"><span class="id" title="definition">height</span></a> <a class="idref" href="MMaps.AVLproofs.html#s:83"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.ZArith.Int.html#be4c59c76b318250400dadb817b41e75"><span class="id" title="notation">≤</span></a> 1.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;<span class="id" title="var">induct</span> <span class="id" title="var">s</span>; <span class="id" title="var">inv_avl</span>.<br/>
&nbsp;- <span class="id" title="tactic">intuition</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="var">autom</span>; <span class="id" title="var">lia_max</span>.<br/>
&nbsp;- <span class="comment">(*&nbsp;Eq&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">intuition</span> (<span class="id" title="tactic">auto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">map</span> <span class="id" title="var">typeclass_instances</span>); <span class="id" title="var">lia_max</span>.<br/>
&nbsp;- <span class="comment">(*&nbsp;Lt&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">IHl</span> <span class="id" title="var">x</span> <span class="id" title="var">e</span>); <span class="id" title="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">apply</span> <a class="idref" href="MMaps.AVLproofs.html#AvlProofs.bal_avl"><span class="id" title="lemma">bal_avl</span></a>; <span class="id" title="tactic">trivial</span>; <span class="id" title="var">lia_max</span>.<br/>
&nbsp;&nbsp;&nbsp;× <span class="id" title="var">lia_bal</span>.<br/>
&nbsp;- <span class="comment">(*&nbsp;Gt&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">IHr</span> <span class="id" title="var">x</span> <span class="id" title="var">e</span>); <span class="id" title="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">apply</span> <a class="idref" href="MMaps.AVLproofs.html#AvlProofs.bal_avl"><span class="id" title="lemma">bal_avl</span></a>; <span class="id" title="tactic">trivial</span>; <span class="id" title="var">lia_max</span>.<br/>
&nbsp;&nbsp;&nbsp;× <span class="id" title="var">lia_bal</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
#[<span class="id" title="var">export</span>] <span class="id" title="keyword">Instance</span> <a id="AvlProofs.add_avl" class="idref" href="#AvlProofs.add_avl"><span class="id" title="instance">add_avl</span></a> <a id="s:87" class="idref" href="#s:87"><span class="id" title="binder">s</span></a> <a id="x:88" class="idref" href="#x:88"><span class="id" title="binder">x</span></a> <a id="e:89" class="idref" href="#e:89"><span class="id" title="binder">e</span></a> `{<a id="Avl0:90" class="idref" href="#Avl0:90"><span class="id" title="binder">!</span></a><a id="Avl0:90" class="idref" href="#Avl0:90"><span class="id" title="binder">Avl</span></a> <a id="Avl0:90" class="idref" href="#Avl0:90"><span class="id" title="binder">s</span></a>} : <a class="idref" href="MMaps.AVLproofs.html#AvlProofs.Avl"><span class="id" title="class">Avl</span></a> (<a class="idref" href="MMaps.AVLproofs.html#AvlProofs.add"><span class="id" title="definition">add</span></a> <a class="idref" href="MMaps.AVLproofs.html#x:88"><span class="id" title="variable">x</span></a> <a class="idref" href="MMaps.AVLproofs.html#e:89"><span class="id" title="variable">e</span></a> <a class="idref" href="MMaps.AVLproofs.html#s:87"><span class="id" title="variable">s</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">destruct</span> (@<a class="idref" href="MMaps.AVLproofs.html#AvlProofs.add_avl_1"><span class="id" title="lemma">add_avl_1</span></a> <span class="id" title="var">s</span> <span class="id" title="var">x</span> <span class="id" title="var">e</span>).<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
join 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">remtree</span> <span class="id" title="var">t</span> <span class="id" title="var">s</span> :=<br/>
&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">t</span> <span class="id" title="keyword">with</span> <a class="idref" href="MMaps.AVLproofs.html#AvlProofs.Node"><span class="id" title="constructor">Node</span></a> ?<span class="id" title="var">h</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> ⇒<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="MMaps.AVLproofs.html#AvlProofs.height"><span class="id" title="definition">height</span></a> <span class="id" title="var">t</span> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">h</span>) <span class="id" title="tactic">by</span> <span class="id" title="tactic">trivial</span>;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">s</span> := <span class="id" title="var">t</span>) <span class="id" title="tactic">in</span> *; <span class="id" title="var">clearbody</span> <span class="id" title="var">s</span><br/>
&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="AvlProofs.join_avl_1" class="idref" href="#AvlProofs.join_avl_1"><span class="id" title="lemma">join_avl_1</span></a> <a id="l:91" class="idref" href="#l:91"><span class="id" title="binder">l</span></a> <a id="x:92" class="idref" href="#x:92"><span class="id" title="binder">x</span></a> <a id="e:93" class="idref" href="#e:93"><span class="id" title="binder">e</span></a> <a id="r:94" class="idref" href="#r:94"><span class="id" title="binder">r</span></a> : <span class="id" title="keyword">∀</span> `{<a id="Avl0:95" class="idref" href="#Avl0:95"><span class="id" title="binder">!</span></a><a id="Avl0:95" class="idref" href="#Avl0:95"><span class="id" title="binder">Avl</span></a> <a id="Avl0:95" class="idref" href="#Avl0:95"><span class="id" title="binder">l</span></a>, <a id="Avl1:96" class="idref" href="#Avl1:96"><span class="id" title="binder">!</span></a><a id="Avl1:96" class="idref" href="#Avl1:96"><span class="id" title="binder">Avl</span></a> <a id="Avl1:96" class="idref" href="#Avl1:96"><span class="id" title="binder">r</span></a>},<br/>
&nbsp;<a class="idref" href="MMaps.AVLproofs.html#AvlProofs.Avl"><span class="id" title="class">Avl</span></a> (<a class="idref" href="MMaps.AVLproofs.html#AvlProofs.join"><span class="id" title="definition">join</span></a> <a class="idref" href="MMaps.AVLproofs.html#l:91"><span class="id" title="variable">l</span></a> <a class="idref" href="MMaps.AVLproofs.html#x:92"><span class="id" title="variable">x</span></a> <a class="idref" href="MMaps.AVLproofs.html#e:93"><span class="id" title="variable">e</span></a> <a class="idref" href="MMaps.AVLproofs.html#r:94"><span class="id" title="variable">r</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">∧</span></a><br/>
&nbsp;0<a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.ZArith.Int.html#be4c59c76b318250400dadb817b41e75"><span class="id" title="notation">≤</span></a> <a class="idref" href="MMaps.AVLproofs.html#AvlProofs.height"><span class="id" title="definition">height</span></a> (<a class="idref" href="MMaps.AVLproofs.html#AvlProofs.join"><span class="id" title="definition">join</span></a> <a class="idref" href="MMaps.AVLproofs.html#l:91"><span class="id" title="variable">l</span></a> <a class="idref" href="MMaps.AVLproofs.html#x:92"><span class="id" title="variable">x</span></a> <a class="idref" href="MMaps.AVLproofs.html#e:93"><span class="id" title="variable">e</span></a> <a class="idref" href="MMaps.AVLproofs.html#r:94"><span class="id" title="variable">r</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.ZArith.Int.html#Int.::Int_scope:x_'-'_x"><span class="id" title="notation">-</span></a> <a class="idref" href="MMaps.AVLproofs.html#I.max"><span class="id" title="axiom">max</span></a> (<a class="idref" href="MMaps.AVLproofs.html#AvlProofs.height"><span class="id" title="definition">height</span></a> <a class="idref" href="MMaps.AVLproofs.html#l:91"><span class="id" title="variable">l</span></a>) (<a class="idref" href="MMaps.AVLproofs.html#AvlProofs.height"><span class="id" title="definition">height</span></a> <a class="idref" href="MMaps.AVLproofs.html#r:94"><span class="id" title="variable">r</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.ZArith.Int.html#be4c59c76b318250400dadb817b41e75"><span class="id" title="notation">≤</span></a> 1.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;<span class="id" title="var">join_tac</span> <span class="id" title="var">l</span> <span class="id" title="var">x</span> <span class="id" title="var">e</span> <span class="id" title="var">r</span>; <span class="id" title="var">clearf</span>.<br/>

<br/>
&nbsp;- <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">destruct</span> (@<a class="idref" href="MMaps.AVLproofs.html#AvlProofs.add_avl_1"><span class="id" title="lemma">add_avl_1</span></a> <span class="id" title="var">r</span> <span class="id" title="var">x</span> <span class="id" title="var">e</span>); <span class="id" title="tactic">auto</span>. <span class="id" title="tactic">split</span>; <span class="id" title="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="var">avl_nns</span>; <span class="id" title="var">lia_max</span>.<br/>

<br/>
&nbsp;- <span class="id" title="var">remtree</span> (<a class="idref" href="MMaps.AVLproofs.html#AvlProofs.Node"><span class="id" title="constructor">Node</span></a> <span class="id" title="var">lh</span> <span class="id" title="var">ll</span> <span class="id" title="var">lx</span> <span class="id" title="var">ld</span> <span class="id" title="var">lr</span>) <span class="id" title="var">l</span>.<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="var">autok</span>.<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (@<a class="idref" href="MMaps.AVLproofs.html#AvlProofs.add_avl_1"><span class="id" title="lemma">add_avl_1</span></a> <span class="id" title="var">l</span> <span class="id" title="var">x</span> <span class="id" title="var">e</span>); <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>. <span class="id" title="var">avl_nns</span>; <span class="id" title="var">lia_max</span>.<br/>

<br/>
&nbsp;- <span class="id" title="var">remtree</span> (<a class="idref" href="MMaps.AVLproofs.html#AvlProofs.Node"><span class="id" title="constructor">Node</span></a> <span class="id" title="var">rh</span> <span class="id" title="var">rl</span> <span class="id" title="var">rx</span> <span class="id" title="var">rd</span> <span class="id" title="var">rr</span>) <span class="id" title="var">r</span>.<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="var">inv_avl</span>.<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">Hlr</span> <span class="id" title="var">x</span> <span class="id" title="var">e</span> <span class="id" title="var">r</span>); <span class="id" title="tactic">trivial</span>; <span class="id" title="tactic">clear</span> <span class="id" title="var">Hrl</span> <span class="id" title="var">Hlr</span>.<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">j</span> := <a class="idref" href="MMaps.AVLproofs.html#AvlProofs.join"><span class="id" title="definition">join</span></a> <span class="id" title="var">lr</span> <span class="id" title="var">x</span> <span class="id" title="var">e</span> <span class="id" title="var">r</span>) <span class="id" title="tactic">in</span> *; <span class="id" title="var">clearbody</span> <span class="id" title="var">j</span>.<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.ZArith.Int.html#Int.::Int_scope:'-'_x"><span class="id" title="notation">-</span></a>(3) <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.ZArith.Int.html#be4c59c76b318250400dadb817b41e75"><span class="id" title="notation">≤</span></a> <a class="idref" href="MMaps.AVLproofs.html#AvlProofs.height"><span class="id" title="definition">height</span></a> <span class="id" title="var">ll</span> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.ZArith.Int.html#Int.::Int_scope:x_'-'_x"><span class="id" title="notation">-</span></a> <a class="idref" href="MMaps.AVLproofs.html#AvlProofs.height"><span class="id" title="definition">height</span></a> <span class="id" title="var">j</span> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.ZArith.Int.html#be4c59c76b318250400dadb817b41e75"><span class="id" title="notation">≤</span></a> 3) <span class="id" title="tactic">by</span> <span class="id" title="var">lia_max</span>.<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">apply</span> <a class="idref" href="MMaps.AVLproofs.html#AvlProofs.bal_avl"><span class="id" title="lemma">bal_avl</span></a>; <span class="id" title="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;× <span class="id" title="var">lia_bal</span>.<br/>

<br/>
&nbsp;- <span class="id" title="var">remtree</span> (<a class="idref" href="MMaps.AVLproofs.html#AvlProofs.Node"><span class="id" title="constructor">Node</span></a> <span class="id" title="var">lh</span> <span class="id" title="var">ll</span> <span class="id" title="var">lx</span> <span class="id" title="var">ld</span> <span class="id" title="var">lr</span>) <span class="id" title="var">l</span>.<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="var">inv_avl</span>.<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hrl</span>; <span class="id" title="tactic">trivial</span>; <span class="id" title="tactic">clear</span> <span class="id" title="var">Hlr</span>.<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">j</span> := <a class="idref" href="MMaps.AVLproofs.html#AvlProofs.join"><span class="id" title="definition">join</span></a> <span class="id" title="var">l</span> <span class="id" title="var">x</span> <span class="id" title="var">e</span> <span class="id" title="var">rl</span>) <span class="id" title="tactic">in</span> *; <span class="id" title="var">clearbody</span> <span class="id" title="var">j</span>.<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.ZArith.Int.html#Int.::Int_scope:'-'_x"><span class="id" title="notation">-</span></a>(3) <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.ZArith.Int.html#be4c59c76b318250400dadb817b41e75"><span class="id" title="notation">≤</span></a> <a class="idref" href="MMaps.AVLproofs.html#AvlProofs.height"><span class="id" title="definition">height</span></a> <span class="id" title="var">j</span> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.ZArith.Int.html#Int.::Int_scope:x_'-'_x"><span class="id" title="notation">-</span></a> <a class="idref" href="MMaps.AVLproofs.html#AvlProofs.height"><span class="id" title="definition">height</span></a> <span class="id" title="var">rr</span> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.ZArith.Int.html#be4c59c76b318250400dadb817b41e75"><span class="id" title="notation">≤</span></a> 3) <span class="id" title="tactic">by</span> <span class="id" title="var">lia_max</span>.<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">apply</span> <a class="idref" href="MMaps.AVLproofs.html#AvlProofs.bal_avl"><span class="id" title="lemma">bal_avl</span></a>; <span class="id" title="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;× <span class="id" title="var">lia_bal</span>.<br/>

<br/>
&nbsp;- <span class="id" title="tactic">clear</span> <span class="id" title="var">Hrl</span> <span class="id" title="var">Hlr</span>.<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="var">remtree</span> (<a class="idref" href="MMaps.AVLproofs.html#AvlProofs.Node"><span class="id" title="constructor">Node</span></a> <span class="id" title="var">lh</span> <span class="id" title="var">ll</span> <span class="id" title="var">lx</span> <span class="id" title="var">ld</span> <span class="id" title="var">lr</span>) <span class="id" title="var">l</span>.<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="var">remtree</span> (<a class="idref" href="MMaps.AVLproofs.html#AvlProofs.Node"><span class="id" title="constructor">Node</span></a> <span class="id" title="var">rh</span> <span class="id" title="var">rl</span> <span class="id" title="var">rx</span> <span class="id" title="var">rd</span> <span class="id" title="var">rr</span>) <span class="id" title="var">r</span>.<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.ZArith.Int.html#Int.::Int_scope:'-'_x"><span class="id" title="notation">-</span></a>(2) <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.ZArith.Int.html#be4c59c76b318250400dadb817b41e75"><span class="id" title="notation">≤</span></a> <a class="idref" href="MMaps.AVLproofs.html#AvlProofs.height"><span class="id" title="definition">height</span></a> <span class="id" title="var">l</span> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.ZArith.Int.html#Int.::Int_scope:x_'-'_x"><span class="id" title="notation">-</span></a> <a class="idref" href="MMaps.AVLproofs.html#AvlProofs.height"><span class="id" title="definition">height</span></a> <span class="id" title="var">r</span> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.ZArith.Int.html#be4c59c76b318250400dadb817b41e75"><span class="id" title="notation">≤</span></a> 2) <span class="id" title="tactic">by</span> <span class="id" title="var">lia_max</span>.<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">apply</span> <a class="idref" href="MMaps.AVLproofs.html#AvlProofs.create_avl"><span class="id" title="lemma">create_avl</span></a>; <span class="id" title="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">rewrite</span> <a class="idref" href="MMaps.AVLproofs.html#AvlProofs.create_height"><span class="id" title="lemma">create_height</span></a>; <span class="id" title="tactic">trivial</span>; <span class="id" title="var">lia_max</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
#[<span class="id" title="var">export</span>] <span class="id" title="keyword">Instance</span> <a id="AvlProofs.join_avl" class="idref" href="#AvlProofs.join_avl"><span class="id" title="instance">join_avl</span></a> <a id="l:97" class="idref" href="#l:97"><span class="id" title="binder">l</span></a> <a id="x:98" class="idref" href="#x:98"><span class="id" title="binder">x</span></a> <a id="e:99" class="idref" href="#e:99"><span class="id" title="binder">e</span></a> <a id="r:100" class="idref" href="#r:100"><span class="id" title="binder">r</span></a> `{<a id="Avl0:101" class="idref" href="#Avl0:101"><span class="id" title="binder">!</span></a><a id="Avl0:101" class="idref" href="#Avl0:101"><span class="id" title="binder">Avl</span></a> <a id="Avl0:101" class="idref" href="#Avl0:101"><span class="id" title="binder">l</span></a>, <a id="Avl1:102" class="idref" href="#Avl1:102"><span class="id" title="binder">!</span></a><a id="Avl1:102" class="idref" href="#Avl1:102"><span class="id" title="binder">Avl</span></a> <a id="Avl1:102" class="idref" href="#Avl1:102"><span class="id" title="binder">r</span></a>} : <a class="idref" href="MMaps.AVLproofs.html#AvlProofs.Avl"><span class="id" title="class">Avl</span></a> (<a class="idref" href="MMaps.AVLproofs.html#AvlProofs.join"><span class="id" title="definition">join</span></a> <a class="idref" href="MMaps.AVLproofs.html#l:97"><span class="id" title="variable">l</span></a> <a class="idref" href="MMaps.AVLproofs.html#x:98"><span class="id" title="variable">x</span></a> <a class="idref" href="MMaps.AVLproofs.html#e:99"><span class="id" title="variable">e</span></a> <a class="idref" href="MMaps.AVLproofs.html#r:100"><span class="id" title="variable">r</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">destruct</span> (@<a class="idref" href="MMaps.AVLproofs.html#AvlProofs.join_avl_1"><span class="id" title="lemma">join_avl_1</span></a> <span class="id" title="var">l</span> <span class="id" title="var">x</span> <span class="id" title="var">e</span> <span class="id" title="var">r</span>).<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
remove_min 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <a id="AvlProofs.remove_min_avl_1" class="idref" href="#AvlProofs.remove_min_avl_1"><span class="id" title="lemma">remove_min_avl_1</span></a> : <span class="id" title="keyword">∀</span> <a id="l:103" class="idref" href="#l:103"><span class="id" title="binder">l</span></a> <a id="x:104" class="idref" href="#x:104"><span class="id" title="binder">x</span></a> <a id="e:105" class="idref" href="#e:105"><span class="id" title="binder">e</span></a> <a id="r:106" class="idref" href="#r:106"><span class="id" title="binder">r</span></a> <a id="h:107" class="idref" href="#h:107"><span class="id" title="binder">h</span></a> `{<a id="Avl0:108" class="idref" href="#Avl0:108"><span class="id" title="binder">!</span></a><a id="Avl0:108" class="idref" href="#Avl0:108"><span class="id" title="binder">Avl</span></a> <a id="Avl0:108" class="idref" href="#Avl0:108"><span class="id" title="binder">(</span></a><a id="Avl0:108" class="idref" href="#Avl0:108"><span class="id" title="binder">Node</span></a> <a id="Avl0:108" class="idref" href="#Avl0:108"><span class="id" title="binder">h</span></a> <a id="Avl0:108" class="idref" href="#Avl0:108"><span class="id" title="binder">l</span></a> <a id="Avl0:108" class="idref" href="#Avl0:108"><span class="id" title="binder">x</span></a> <a id="Avl0:108" class="idref" href="#Avl0:108"><span class="id" title="binder">e</span></a> <a id="Avl0:108" class="idref" href="#Avl0:108"><span class="id" title="binder">r</span></a><a id="Avl0:108" class="idref" href="#Avl0:108"><span class="id" title="binder">)</span></a>},<br/>
&nbsp;<a class="idref" href="MMaps.AVLproofs.html#AvlProofs.Avl"><span class="id" title="class">Avl</span></a> <a class="idref" href="MMaps.GenTree.html#6498f4b98d8d188be6bde7da0b9ffb6f"><span class="id" title="notation">(</span></a><a class="idref" href="MMaps.AVLproofs.html#AvlProofs.remove_min"><span class="id" title="definition">remove_min</span></a> <a class="idref" href="MMaps.AVLproofs.html#l:103"><span class="id" title="variable">l</span></a> <a class="idref" href="MMaps.AVLproofs.html#x:104"><span class="id" title="variable">x</span></a> <a class="idref" href="MMaps.AVLproofs.html#e:105"><span class="id" title="variable">e</span></a> <a class="idref" href="MMaps.AVLproofs.html#r:106"><span class="id" title="variable">r</span></a><a class="idref" href="MMaps.GenTree.html#6498f4b98d8d188be6bde7da0b9ffb6f"><span class="id" title="notation">)#1</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">∧</span></a><br/>
&nbsp;0 <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.ZArith.Int.html#be4c59c76b318250400dadb817b41e75"><span class="id" title="notation">≤</span></a> <a class="idref" href="MMaps.AVLproofs.html#AvlProofs.height"><span class="id" title="definition">height</span></a> (<a class="idref" href="MMaps.AVLproofs.html#AvlProofs.Node"><span class="id" title="constructor">Node</span></a> <a class="idref" href="MMaps.AVLproofs.html#h:107"><span class="id" title="variable">h</span></a> <a class="idref" href="MMaps.AVLproofs.html#l:103"><span class="id" title="variable">l</span></a> <a class="idref" href="MMaps.AVLproofs.html#x:104"><span class="id" title="variable">x</span></a> <a class="idref" href="MMaps.AVLproofs.html#e:105"><span class="id" title="variable">e</span></a> <a class="idref" href="MMaps.AVLproofs.html#r:106"><span class="id" title="variable">r</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.ZArith.Int.html#Int.::Int_scope:x_'-'_x"><span class="id" title="notation">-</span></a> <a class="idref" href="MMaps.AVLproofs.html#AvlProofs.height"><span class="id" title="definition">height</span></a> <a class="idref" href="MMaps.GenTree.html#6498f4b98d8d188be6bde7da0b9ffb6f"><span class="id" title="notation">(</span></a><a class="idref" href="MMaps.AVLproofs.html#AvlProofs.remove_min"><span class="id" title="definition">remove_min</span></a> <a class="idref" href="MMaps.AVLproofs.html#l:103"><span class="id" title="variable">l</span></a> <a class="idref" href="MMaps.AVLproofs.html#x:104"><span class="id" title="variable">x</span></a> <a class="idref" href="MMaps.AVLproofs.html#e:105"><span class="id" title="variable">e</span></a> <a class="idref" href="MMaps.AVLproofs.html#r:106"><span class="id" title="variable">r</span></a><a class="idref" href="MMaps.GenTree.html#6498f4b98d8d188be6bde7da0b9ffb6f"><span class="id" title="notation">)#1</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.ZArith.Int.html#be4c59c76b318250400dadb817b41e75"><span class="id" title="notation">≤</span></a> 1.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">l</span> <span class="id" title="var">x</span> <span class="id" title="var">e</span> <span class="id" title="var">r</span>; <span class="id" title="var">functional</span> <span class="id" title="tactic">induction</span> (<a class="idref" href="MMaps.AVLproofs.html#AvlProofs.remove_min"><span class="id" title="definition">remove_min</span></a> <span class="id" title="var">l</span> <span class="id" title="var">x</span> <span class="id" title="var">e</span> <span class="id" title="var">r</span>);<br/>
&nbsp;<span class="id" title="tactic">subst</span>; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">intros</span>.<br/>
&nbsp;- <span class="id" title="var">inv_avl</span>; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">split</span>; <span class="id" title="tactic">auto</span>. <span class="id" title="var">avl_nns</span>; <span class="id" title="var">lia_max</span>.<br/>
&nbsp;- <span class="id" title="var">mysubst</span>. <span class="id" title="var">inv_avl'</span>; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="var">edestruct</span> <span class="id" title="var">IHp</span>; <span class="id" title="tactic">clear</span> <span class="id" title="var">IHp</span>; [<span class="id" title="tactic">eauto</span>|].<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">apply</span> <a class="idref" href="MMaps.AVLproofs.html#AvlProofs.bal_avl"><span class="id" title="lemma">bal_avl</span></a>; <span class="id" title="tactic">trivial</span>; <span class="id" title="var">lia_max</span>.<br/>
&nbsp;&nbsp;&nbsp;× <span class="id" title="var">lia_bal</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
#[<span class="id" title="var">export</span>] <span class="id" title="keyword">Instance</span> <a id="AvlProofs.remove_min_avl" class="idref" href="#AvlProofs.remove_min_avl"><span class="id" title="instance">remove_min_avl</span></a> <a id="l:109" class="idref" href="#l:109"><span class="id" title="binder">l</span></a> <a id="x:110" class="idref" href="#x:110"><span class="id" title="binder">x</span></a> <a id="e:111" class="idref" href="#e:111"><span class="id" title="binder">e</span></a> <a id="r:112" class="idref" href="#r:112"><span class="id" title="binder">r</span></a> <a id="h:113" class="idref" href="#h:113"><span class="id" title="binder">h</span></a> `{<a id="Avl0:114" class="idref" href="#Avl0:114"><span class="id" title="binder">!</span></a><a id="Avl0:114" class="idref" href="#Avl0:114"><span class="id" title="binder">Avl</span></a> <a id="Avl0:114" class="idref" href="#Avl0:114"><span class="id" title="binder">(</span></a><a id="Avl0:114" class="idref" href="#Avl0:114"><span class="id" title="binder">Node</span></a> <a id="Avl0:114" class="idref" href="#Avl0:114"><span class="id" title="binder">h</span></a> <a id="Avl0:114" class="idref" href="#Avl0:114"><span class="id" title="binder">l</span></a> <a id="Avl0:114" class="idref" href="#Avl0:114"><span class="id" title="binder">x</span></a> <a id="Avl0:114" class="idref" href="#Avl0:114"><span class="id" title="binder">e</span></a> <a id="Avl0:114" class="idref" href="#Avl0:114"><span class="id" title="binder">r</span></a><a id="Avl0:114" class="idref" href="#Avl0:114"><span class="id" title="binder">)</span></a>} :<br/>
&nbsp;&nbsp;<a class="idref" href="MMaps.AVLproofs.html#AvlProofs.Avl"><span class="id" title="class">Avl</span></a> <a class="idref" href="MMaps.GenTree.html#6498f4b98d8d188be6bde7da0b9ffb6f"><span class="id" title="notation">(</span></a><a class="idref" href="MMaps.AVLproofs.html#AvlProofs.remove_min"><span class="id" title="definition">remove_min</span></a> <a class="idref" href="MMaps.AVLproofs.html#l:109"><span class="id" title="variable">l</span></a> <a class="idref" href="MMaps.AVLproofs.html#x:110"><span class="id" title="variable">x</span></a> <a class="idref" href="MMaps.AVLproofs.html#e:111"><span class="id" title="variable">e</span></a> <a class="idref" href="MMaps.AVLproofs.html#r:112"><span class="id" title="variable">r</span></a><a class="idref" href="MMaps.GenTree.html#6498f4b98d8d188be6bde7da0b9ffb6f"><span class="id" title="notation">)#1</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">destruct</span> (@<a class="idref" href="MMaps.AVLproofs.html#AvlProofs.remove_min_avl_1"><span class="id" title="lemma">remove_min_avl_1</span></a> <span class="id" title="var">l</span> <span class="id" title="var">x</span> <span class="id" title="var">e</span> <span class="id" title="var">r</span> <span class="id" title="var">h</span>).<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
append 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <a id="AvlProofs.append_avl_1" class="idref" href="#AvlProofs.append_avl_1"><span class="id" title="lemma">append_avl_1</span></a> : <span class="id" title="keyword">∀</span> <a id="s1:115" class="idref" href="#s1:115"><span class="id" title="binder">s1</span></a> <a id="s2:116" class="idref" href="#s2:116"><span class="id" title="binder">s2</span></a> `{<a id="Avl0:117" class="idref" href="#Avl0:117"><span class="id" title="binder">!</span></a><a id="Avl0:117" class="idref" href="#Avl0:117"><span class="id" title="binder">Avl</span></a> <a id="Avl0:117" class="idref" href="#Avl0:117"><span class="id" title="binder">s1</span></a>, <a id="Avl1:118" class="idref" href="#Avl1:118"><span class="id" title="binder">!</span></a><a id="Avl1:118" class="idref" href="#Avl1:118"><span class="id" title="binder">Avl</span></a> <a id="Avl1:118" class="idref" href="#Avl1:118"><span class="id" title="binder">s2</span></a>},<br/>
&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.ZArith.Int.html#Int.::Int_scope:'-'_x"><span class="id" title="notation">-</span></a>(2) <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.ZArith.Int.html#be4c59c76b318250400dadb817b41e75"><span class="id" title="notation">≤</span></a> <a class="idref" href="MMaps.AVLproofs.html#AvlProofs.height"><span class="id" title="definition">height</span></a> <a class="idref" href="MMaps.AVLproofs.html#s1:115"><span class="id" title="variable">s1</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.ZArith.Int.html#Int.::Int_scope:x_'-'_x"><span class="id" title="notation">-</span></a> <a class="idref" href="MMaps.AVLproofs.html#AvlProofs.height"><span class="id" title="definition">height</span></a> <a class="idref" href="MMaps.AVLproofs.html#s2:116"><span class="id" title="variable">s2</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.ZArith.Int.html#be4c59c76b318250400dadb817b41e75"><span class="id" title="notation">≤</span></a> 2 <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;<a class="idref" href="MMaps.AVLproofs.html#AvlProofs.Avl"><span class="id" title="class">Avl</span></a> (<a class="idref" href="MMaps.AVLproofs.html#AvlProofs.append"><span class="id" title="definition">append</span></a> <a class="idref" href="MMaps.AVLproofs.html#s1:115"><span class="id" title="variable">s1</span></a> <a class="idref" href="MMaps.AVLproofs.html#s2:116"><span class="id" title="variable">s2</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">∧</span></a><br/>
&nbsp;0<a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.ZArith.Int.html#be4c59c76b318250400dadb817b41e75"><span class="id" title="notation">≤</span></a> <a class="idref" href="MMaps.AVLproofs.html#AvlProofs.height"><span class="id" title="definition">height</span></a> (<a class="idref" href="MMaps.AVLproofs.html#AvlProofs.append"><span class="id" title="definition">append</span></a> <a class="idref" href="MMaps.AVLproofs.html#s1:115"><span class="id" title="variable">s1</span></a> <a class="idref" href="MMaps.AVLproofs.html#s2:116"><span class="id" title="variable">s2</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.ZArith.Int.html#Int.::Int_scope:x_'-'_x"><span class="id" title="notation">-</span></a> <a class="idref" href="MMaps.AVLproofs.html#I.max"><span class="id" title="axiom">max</span></a> (<a class="idref" href="MMaps.AVLproofs.html#AvlProofs.height"><span class="id" title="definition">height</span></a> <a class="idref" href="MMaps.AVLproofs.html#s1:115"><span class="id" title="variable">s1</span></a>) (<a class="idref" href="MMaps.AVLproofs.html#AvlProofs.height"><span class="id" title="definition">height</span></a> <a class="idref" href="MMaps.AVLproofs.html#s2:116"><span class="id" title="variable">s2</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.ZArith.Int.html#be4c59c76b318250400dadb817b41e75"><span class="id" title="notation">≤</span></a>1.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">s1</span> <span class="id" title="var">s2</span>; <span class="id" title="var">functional</span> <span class="id" title="tactic">induction</span> (<a class="idref" href="MMaps.AVLproofs.html#AvlProofs.append"><span class="id" title="definition">append</span></a> <span class="id" title="var">s1</span> <span class="id" title="var">s2</span>); <span class="id" title="tactic">intros</span>;<br/>
&nbsp;<span class="id" title="tactic">try</span> (<span class="id" title="var">factornode</span> <span class="id" title="var">s1</span>).<br/>
&nbsp;- <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">split</span>; <span class="id" title="tactic">auto</span>; <span class="id" title="var">avl_nns</span>; <span class="id" title="var">lia_max</span>.<br/>
&nbsp;- <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">split</span>; <span class="id" title="tactic">auto</span>; <span class="id" title="var">avl_nns</span>; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *; <span class="id" title="var">lia_max</span>.<br/>
&nbsp;- <span class="id" title="tactic">generalize</span> (@<a class="idref" href="MMaps.AVLproofs.html#AvlProofs.remove_min_avl_1"><span class="id" title="lemma">remove_min_avl_1</span></a> <span class="id" title="var">l2</span> <span class="id" title="var">x2</span> <span class="id" title="var">d2</span> <span class="id" title="var">r2</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="var">mysubst</span>. <span class="id" title="tactic">destruct</span> 1; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">apply</span> <a class="idref" href="MMaps.AVLproofs.html#AvlProofs.bal_avl"><span class="id" title="lemma">bal_avl</span></a>; <span class="id" title="tactic">trivial</span>. <span class="id" title="tactic">simpl</span>; <span class="id" title="var">lia_max</span>.<br/>
&nbsp;&nbsp;&nbsp;× <span class="id" title="var">lia_bal</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="AvlProofs.append_avl" class="idref" href="#AvlProofs.append_avl"><span class="id" title="lemma">append_avl</span></a> <a id="s1:119" class="idref" href="#s1:119"><span class="id" title="binder">s1</span></a> <a id="s2:120" class="idref" href="#s2:120"><span class="id" title="binder">s2</span></a> `{<a id="Avl0:121" class="idref" href="#Avl0:121"><span class="id" title="binder">!</span></a><a id="Avl0:121" class="idref" href="#Avl0:121"><span class="id" title="binder">Avl</span></a> <a id="Avl0:121" class="idref" href="#Avl0:121"><span class="id" title="binder">s1</span></a>, <a id="Avl1:122" class="idref" href="#Avl1:122"><span class="id" title="binder">!</span></a><a id="Avl1:122" class="idref" href="#Avl1:122"><span class="id" title="binder">Avl</span></a> <a id="Avl1:122" class="idref" href="#Avl1:122"><span class="id" title="binder">s2</span></a>} :<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.ZArith.Int.html#Int.::Int_scope:'-'_x"><span class="id" title="notation">-</span></a>(2) <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.ZArith.Int.html#be4c59c76b318250400dadb817b41e75"><span class="id" title="notation">≤</span></a> <a class="idref" href="MMaps.AVLproofs.html#AvlProofs.height"><span class="id" title="definition">height</span></a> <a class="idref" href="MMaps.AVLproofs.html#s1:119"><span class="id" title="variable">s1</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.ZArith.Int.html#Int.::Int_scope:x_'-'_x"><span class="id" title="notation">-</span></a> <a class="idref" href="MMaps.AVLproofs.html#AvlProofs.height"><span class="id" title="definition">height</span></a> <a class="idref" href="MMaps.AVLproofs.html#s2:120"><span class="id" title="variable">s2</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.ZArith.Int.html#be4c59c76b318250400dadb817b41e75"><span class="id" title="notation">≤</span></a> 2 <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MMaps.AVLproofs.html#AvlProofs.Avl"><span class="id" title="class">Avl</span></a> (<a class="idref" href="MMaps.AVLproofs.html#AvlProofs.append"><span class="id" title="definition">append</span></a> <a class="idref" href="MMaps.AVLproofs.html#s1:119"><span class="id" title="variable">s1</span></a> <a class="idref" href="MMaps.AVLproofs.html#s2:120"><span class="id" title="variable">s2</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;<span class="id" title="tactic">intros</span>; <span class="id" title="var">now</span> <span class="id" title="tactic">destruct</span> (@<a class="idref" href="MMaps.AVLproofs.html#AvlProofs.append_avl_1"><span class="id" title="lemma">append_avl_1</span></a> <span class="id" title="var">s1</span> <span class="id" title="var">s2</span>).<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
remove 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <a id="AvlProofs.remove_avl_1" class="idref" href="#AvlProofs.remove_avl_1"><span class="id" title="lemma">remove_avl_1</span></a> : <span class="id" title="keyword">∀</span> <a id="s:123" class="idref" href="#s:123"><span class="id" title="binder">s</span></a> <a id="x:124" class="idref" href="#x:124"><span class="id" title="binder">x</span></a> `{<a id="Avl0:125" class="idref" href="#Avl0:125"><span class="id" title="binder">!</span></a><a id="Avl0:125" class="idref" href="#Avl0:125"><span class="id" title="binder">Avl</span></a> <a id="Avl0:125" class="idref" href="#Avl0:125"><span class="id" title="binder">s</span></a>},<br/>
&nbsp;<a class="idref" href="MMaps.AVLproofs.html#AvlProofs.Avl"><span class="id" title="class">Avl</span></a> (<a class="idref" href="MMaps.AVLproofs.html#AvlProofs.remove"><span class="id" title="definition">remove</span></a> <a class="idref" href="MMaps.AVLproofs.html#x:124"><span class="id" title="variable">x</span></a> <a class="idref" href="MMaps.AVLproofs.html#s:123"><span class="id" title="variable">s</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">∧</span></a> 0 <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.ZArith.Int.html#be4c59c76b318250400dadb817b41e75"><span class="id" title="notation">≤</span></a> <a class="idref" href="MMaps.AVLproofs.html#AvlProofs.height"><span class="id" title="definition">height</span></a> <a class="idref" href="MMaps.AVLproofs.html#s:123"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.ZArith.Int.html#Int.::Int_scope:x_'-'_x"><span class="id" title="notation">-</span></a> <a class="idref" href="MMaps.AVLproofs.html#AvlProofs.height"><span class="id" title="definition">height</span></a> (<a class="idref" href="MMaps.AVLproofs.html#AvlProofs.remove"><span class="id" title="definition">remove</span></a> <a class="idref" href="MMaps.AVLproofs.html#x:124"><span class="id" title="variable">x</span></a> <a class="idref" href="MMaps.AVLproofs.html#s:123"><span class="id" title="variable">s</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.ZArith.Int.html#be4c59c76b318250400dadb817b41e75"><span class="id" title="notation">≤</span></a> 1.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;<span class="id" title="var">induct</span> <span class="id" title="var">s</span>; <span class="id" title="var">inv_avl</span>.<br/>
&nbsp;- <span class="id" title="tactic">intuition</span> (<span class="id" title="tactic">auto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">map</span> <span class="id" title="var">typeclass_instances</span>); <span class="id" title="var">lia_max</span>.<br/>
&nbsp;- <span class="comment">(*&nbsp;Eq&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> (@<a class="idref" href="MMaps.AVLproofs.html#AvlProofs.append_avl_1"><span class="id" title="lemma">append_avl_1</span></a> <span class="id" title="var">l</span> <span class="id" title="var">r</span>).<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intuition</span> <span class="id" title="var">lia_max</span>.<br/>
&nbsp;- <span class="comment">(*&nbsp;Lt&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">IHl</span> <span class="id" title="var">x</span>); <span class="id" title="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">apply</span> <a class="idref" href="MMaps.AVLproofs.html#AvlProofs.bal_avl"><span class="id" title="lemma">bal_avl</span></a>; <span class="id" title="tactic">trivial</span>; <span class="id" title="var">lia_max</span>.<br/>
&nbsp;&nbsp;&nbsp;× <span class="id" title="var">lia_bal</span>.<br/>
&nbsp;- <span class="comment">(*&nbsp;Gt&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">IHr</span> <span class="id" title="var">x</span>); <span class="id" title="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">apply</span> <a class="idref" href="MMaps.AVLproofs.html#AvlProofs.bal_avl"><span class="id" title="lemma">bal_avl</span></a>; <span class="id" title="tactic">trivial</span>; <span class="id" title="var">lia_max</span>.<br/>
&nbsp;&nbsp;&nbsp;× <span class="id" title="var">lia_bal</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
#[<span class="id" title="var">export</span>] <span class="id" title="keyword">Instance</span> <a id="AvlProofs.remove_avl" class="idref" href="#AvlProofs.remove_avl"><span class="id" title="instance">remove_avl</span></a> <a id="s:126" class="idref" href="#s:126"><span class="id" title="binder">s</span></a> <a id="x:127" class="idref" href="#x:127"><span class="id" title="binder">x</span></a> `{<a id="Avl0:128" class="idref" href="#Avl0:128"><span class="id" title="binder">!</span></a><a id="Avl0:128" class="idref" href="#Avl0:128"><span class="id" title="binder">Avl</span></a> <a id="Avl0:128" class="idref" href="#Avl0:128"><span class="id" title="binder">s</span></a>} : <a class="idref" href="MMaps.AVLproofs.html#AvlProofs.Avl"><span class="id" title="class">Avl</span></a> (<a class="idref" href="MMaps.AVLproofs.html#AvlProofs.remove"><span class="id" title="definition">remove</span></a> <a class="idref" href="MMaps.AVLproofs.html#x:127"><span class="id" title="variable">x</span></a> <a class="idref" href="MMaps.AVLproofs.html#s:126"><span class="id" title="variable">s</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">destruct</span> (@<a class="idref" href="MMaps.AVLproofs.html#AvlProofs.remove_avl_1"><span class="id" title="lemma">remove_avl_1</span></a> <span class="id" title="var">s</span> <span class="id" title="var">x</span>).<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
concat 
</div>
<div class="code">

<br/>
#[<span class="id" title="var">export</span>] <span class="id" title="keyword">Instance</span> <a id="AvlProofs.concat_avl" class="idref" href="#AvlProofs.concat_avl"><span class="id" title="instance">concat_avl</span></a> <a id="s1:129" class="idref" href="#s1:129"><span class="id" title="binder">s1</span></a> <a id="s2:130" class="idref" href="#s2:130"><span class="id" title="binder">s2</span></a> `{<a id="Avl0:131" class="idref" href="#Avl0:131"><span class="id" title="binder">!</span></a><a id="Avl0:131" class="idref" href="#Avl0:131"><span class="id" title="binder">Avl</span></a> <a id="Avl0:131" class="idref" href="#Avl0:131"><span class="id" title="binder">s1</span></a>, <a id="Avl1:132" class="idref" href="#Avl1:132"><span class="id" title="binder">!</span></a><a id="Avl1:132" class="idref" href="#Avl1:132"><span class="id" title="binder">Avl</span></a> <a id="Avl1:132" class="idref" href="#Avl1:132"><span class="id" title="binder">s2</span></a>} : <a class="idref" href="MMaps.AVLproofs.html#AvlProofs.Avl"><span class="id" title="class">Avl</span></a> (<a class="idref" href="MMaps.AVLproofs.html#AvlProofs.concat"><span class="id" title="definition">concat</span></a> <a class="idref" href="MMaps.AVLproofs.html#s1:129"><span class="id" title="variable">s1</span></a> <a class="idref" href="MMaps.AVLproofs.html#s2:130"><span class="id" title="variable">s2</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;<span class="id" title="var">functional</span> <span class="id" title="tactic">induction</span> (<a class="idref" href="MMaps.AVLproofs.html#AvlProofs.concat"><span class="id" title="definition">concat</span></a> <span class="id" title="var">s1</span> <span class="id" title="var">s2</span>); <span class="id" title="tactic">auto</span>.<br/>
&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="MMaps.AVLproofs.html#AvlProofs.join_avl"><span class="id" title="instance">join_avl</span></a>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;<span class="id" title="tactic">generalize</span> (@<a class="idref" href="MMaps.AVLproofs.html#AvlProofs.remove_min_avl"><span class="id" title="instance">remove_min_avl</span></a> <span class="id" title="var">l2</span> <span class="id" title="var">x2</span> <span class="id" title="var">d2</span> <span class="id" title="var">r2</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>). <span class="id" title="var">now</span> <span class="id" title="var">mysubst</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
split 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <a id="AvlProofs.split_avl" class="idref" href="#AvlProofs.split_avl"><span class="id" title="lemma">split_avl</span></a> : <span class="id" title="keyword">∀</span> <a id="s:133" class="idref" href="#s:133"><span class="id" title="binder">s</span></a> <a id="x:134" class="idref" href="#x:134"><span class="id" title="binder">x</span></a> `{<a id="Avl0:135" class="idref" href="#Avl0:135"><span class="id" title="binder">!</span></a><a id="Avl0:135" class="idref" href="#Avl0:135"><span class="id" title="binder">Avl</span></a> <a id="Avl0:135" class="idref" href="#Avl0:135"><span class="id" title="binder">s</span></a>},<br/>
&nbsp;&nbsp;<a class="idref" href="MMaps.AVLproofs.html#AvlProofs.Avl"><span class="id" title="class">Avl</span></a> (<a class="idref" href="MMaps.AVLproofs.html#AvlProofs.t_left"><span class="id" title="projection">t_left</span></a> (<a class="idref" href="MMaps.AVLproofs.html#AvlProofs.split"><span class="id" title="definition">split</span></a> <a class="idref" href="MMaps.AVLproofs.html#x:134"><span class="id" title="variable">x</span></a> <a class="idref" href="MMaps.AVLproofs.html#s:133"><span class="id" title="variable">s</span></a>)) <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">∧</span></a> <a class="idref" href="MMaps.AVLproofs.html#AvlProofs.Avl"><span class="id" title="class">Avl</span></a> (<a class="idref" href="MMaps.AVLproofs.html#AvlProofs.t_right"><span class="id" title="projection">t_right</span></a> (<a class="idref" href="MMaps.AVLproofs.html#AvlProofs.split"><span class="id" title="definition">split</span></a> <a class="idref" href="MMaps.AVLproofs.html#x:134"><span class="id" title="variable">x</span></a> <a class="idref" href="MMaps.AVLproofs.html#s:133"><span class="id" title="variable">s</span></a>)).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">s</span> <span class="id" title="var">x</span>. <span class="id" title="var">functional</span> <span class="id" title="tactic">induction</span> (<a class="idref" href="MMaps.AVLproofs.html#AvlProofs.split"><span class="id" title="definition">split</span></a> <span class="id" title="var">x</span> <span class="id" title="var">s</span>); <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;- <span class="id" title="tactic">intros</span>. <span class="id" title="var">inv_avl</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;- <span class="id" title="var">mysubst</span>; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">inversion_clear</span> 1; <span class="id" title="tactic">intuition</span> (<span class="id" title="tactic">auto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">map</span> <span class="id" title="var">typeclass_instances</span>).<br/>
&nbsp;- <span class="id" title="var">mysubst</span>; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">inversion_clear</span> 1; <span class="id" title="tactic">intuition</span> (<span class="id" title="tactic">auto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">map</span> <span class="id" title="var">typeclass_instances</span>).<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
filter 
</div>
<div class="code">

<br/>
#[<span class="id" title="var">export</span>] <span class="id" title="keyword">Instance</span> <a id="AvlProofs.filter_avl" class="idref" href="#AvlProofs.filter_avl"><span class="id" title="instance">filter_avl</span></a> (<a id="f:136" class="idref" href="#f:136"><span class="id" title="binder">f</span></a>:<a class="idref" href="MMaps.AVLproofs.html#AvlProofs.key"><span class="id" title="definition">key</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><a class="idref" href="MMaps.AVLproofs.html#AvlProofs.Elt.elt"><span class="id" title="variable">elt</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a>) <a id="m:137" class="idref" href="#m:137"><span class="id" title="binder">m</span></a> `{<a id="Avl0:138" class="idref" href="#Avl0:138"><span class="id" title="binder">!</span></a><a id="Avl0:138" class="idref" href="#Avl0:138"><span class="id" title="binder">Avl</span></a> <a id="Avl0:138" class="idref" href="#Avl0:138"><span class="id" title="binder">m</span></a>} : <a class="idref" href="MMaps.AVLproofs.html#AvlProofs.Avl"><span class="id" title="class">Avl</span></a> (<a class="idref" href="MMaps.AVLproofs.html#AvlProofs.filter"><span class="id" title="definition">filter</span></a> <a class="idref" href="MMaps.AVLproofs.html#f:136"><span class="id" title="variable">f</span></a> <a class="idref" href="MMaps.AVLproofs.html#m:137"><span class="id" title="variable">m</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">m</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">auto</span>. <span class="id" title="var">inv_avl</span>.<br/>
&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">f</span>; [<span class="id" title="tactic">apply</span> <a class="idref" href="MMaps.AVLproofs.html#AvlProofs.join_avl"><span class="id" title="instance">join_avl</span></a> | <span class="id" title="tactic">apply</span> <a class="idref" href="MMaps.AVLproofs.html#AvlProofs.concat_avl"><span class="id" title="instance">concat_avl</span></a> ]; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
#[<span class="id" title="var">export</span>] <span class="id" title="keyword">Instance</span> <a id="AvlProofs.partition_avl1" class="idref" href="#AvlProofs.partition_avl1"><span class="id" title="instance">partition_avl1</span></a> (<a id="f:139" class="idref" href="#f:139"><span class="id" title="binder">f</span></a>:<a class="idref" href="MMaps.AVLproofs.html#AvlProofs.key"><span class="id" title="definition">key</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><a class="idref" href="MMaps.AVLproofs.html#AvlProofs.Elt.elt"><span class="id" title="variable">elt</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a>) <a id="m:140" class="idref" href="#m:140"><span class="id" title="binder">m</span></a> `{<a id="Avl0:141" class="idref" href="#Avl0:141"><span class="id" title="binder">!</span></a><a id="Avl0:141" class="idref" href="#Avl0:141"><span class="id" title="binder">Avl</span></a> <a id="Avl0:141" class="idref" href="#Avl0:141"><span class="id" title="binder">m</span></a>} :<br/>
&nbsp;<a class="idref" href="MMaps.AVLproofs.html#AvlProofs.Avl"><span class="id" title="class">Avl</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> (<a class="idref" href="MMaps.AVLproofs.html#AvlProofs.partition"><span class="id" title="definition">partition</span></a> <a class="idref" href="MMaps.AVLproofs.html#f:139"><span class="id" title="variable">f</span></a> <a class="idref" href="MMaps.AVLproofs.html#m:140"><span class="id" title="variable">m</span></a>)).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">m</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">auto</span>. <span class="id" title="var">inv_avl</span>.<br/>
&nbsp;<span class="id" title="tactic">destruct</span> <a class="idref" href="MMaps.AVLproofs.html#AvlProofs.partition"><span class="id" title="definition">partition</span></a>, <a class="idref" href="MMaps.AVLproofs.html#AvlProofs.partition"><span class="id" title="definition">partition</span></a>, <span class="id" title="var">f</span>; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *;<br/>
&nbsp;[<span class="id" title="tactic">apply</span> <a class="idref" href="MMaps.AVLproofs.html#AvlProofs.join_avl"><span class="id" title="instance">join_avl</span></a> | <span class="id" title="tactic">apply</span> <a class="idref" href="MMaps.AVLproofs.html#AvlProofs.concat_avl"><span class="id" title="instance">concat_avl</span></a>]; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
#[<span class="id" title="var">export</span>] <span class="id" title="keyword">Instance</span> <a id="AvlProofs.partition_avl2" class="idref" href="#AvlProofs.partition_avl2"><span class="id" title="instance">partition_avl2</span></a> (<a id="f:142" class="idref" href="#f:142"><span class="id" title="binder">f</span></a>:<a class="idref" href="MMaps.AVLproofs.html#AvlProofs.key"><span class="id" title="definition">key</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><a class="idref" href="MMaps.AVLproofs.html#AvlProofs.Elt.elt"><span class="id" title="variable">elt</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a>) <a id="m:143" class="idref" href="#m:143"><span class="id" title="binder">m</span></a> `{<a id="Avl0:144" class="idref" href="#Avl0:144"><span class="id" title="binder">!</span></a><a id="Avl0:144" class="idref" href="#Avl0:144"><span class="id" title="binder">Avl</span></a> <a id="Avl0:144" class="idref" href="#Avl0:144"><span class="id" title="binder">m</span></a>} :<br/>
&nbsp;<a class="idref" href="MMaps.AVLproofs.html#AvlProofs.Avl"><span class="id" title="class">Avl</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Datatypes.html#snd"><span class="id" title="definition">snd</span></a> (<a class="idref" href="MMaps.AVLproofs.html#AvlProofs.partition"><span class="id" title="definition">partition</span></a> <a class="idref" href="MMaps.AVLproofs.html#f:142"><span class="id" title="variable">f</span></a> <a class="idref" href="MMaps.AVLproofs.html#m:143"><span class="id" title="variable">m</span></a>)).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">m</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">auto</span>. <span class="id" title="var">inv_avl</span>.<br/>
&nbsp;<span class="id" title="tactic">destruct</span> <a class="idref" href="MMaps.AVLproofs.html#AvlProofs.partition"><span class="id" title="definition">partition</span></a>, <a class="idref" href="MMaps.AVLproofs.html#AvlProofs.partition"><span class="id" title="definition">partition</span></a>, <span class="id" title="var">f</span>; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *;<br/>
&nbsp;[<span class="id" title="tactic">apply</span> <a class="idref" href="MMaps.AVLproofs.html#AvlProofs.concat_avl"><span class="id" title="instance">concat_avl</span></a> | <span class="id" title="tactic">apply</span> <a class="idref" href="MMaps.AVLproofs.html#AvlProofs.join_avl"><span class="id" title="instance">join_avl</span></a>]; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="MMaps.AVLproofs.html#AvlProofs.Elt"><span class="id" title="section">Elt</span></a>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="AvlProofs.map_height" class="idref" href="#AvlProofs.map_height"><span class="id" title="lemma">map_height</span></a> {<a id="elt:145" class="idref" href="#elt:145"><span class="id" title="binder">elt</span></a> <a id="elt':146" class="idref" href="#elt':146"><span class="id" title="binder">elt'</span></a>}(<a id="f:147" class="idref" href="#f:147"><span class="id" title="binder">f</span></a>:<a class="idref" href="MMaps.AVLproofs.html#elt:145"><span class="id" title="variable">elt</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><a class="idref" href="MMaps.AVLproofs.html#elt':146"><span class="id" title="variable">elt'</span></a>) <a id="m:148" class="idref" href="#m:148"><span class="id" title="binder">m</span></a> : <a class="idref" href="MMaps.AVLproofs.html#AvlProofs.height"><span class="id" title="definition">height</span></a> (<a class="idref" href="MMaps.AVLproofs.html#AvlProofs.map"><span class="id" title="definition">map</span></a> <a class="idref" href="MMaps.AVLproofs.html#f:147"><span class="id" title="variable">f</span></a> <a class="idref" href="MMaps.AVLproofs.html#m:148"><span class="id" title="variable">m</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MMaps.AVLproofs.html#AvlProofs.height"><span class="id" title="definition">height</span></a> <a class="idref" href="MMaps.AVLproofs.html#m:148"><span class="id" title="variable">m</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">m</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
#[<span class="id" title="var">export</span>] <span class="id" title="keyword">Instance</span> <a id="AvlProofs.map_avl" class="idref" href="#AvlProofs.map_avl"><span class="id" title="instance">map_avl</span></a> {<a id="elt:149" class="idref" href="#elt:149"><span class="id" title="binder">elt</span></a> <a id="elt':150" class="idref" href="#elt':150"><span class="id" title="binder">elt'</span></a>}(<a id="f:151" class="idref" href="#f:151"><span class="id" title="binder">f</span></a>:<a class="idref" href="MMaps.AVLproofs.html#elt:149"><span class="id" title="variable">elt</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><a class="idref" href="MMaps.AVLproofs.html#elt':150"><span class="id" title="variable">elt'</span></a>) <a id="m:152" class="idref" href="#m:152"><span class="id" title="binder">m</span></a> `(<a id="Avl0:153" class="idref" href="#Avl0:153"><span class="id" title="binder">!</span></a><a id="Avl0:153" class="idref" href="#Avl0:153"><span class="id" title="binder">Avl</span></a> <a id="Avl0:153" class="idref" href="#Avl0:153"><span class="id" title="binder">m</span></a>) : <a class="idref" href="MMaps.AVLproofs.html#AvlProofs.Avl"><span class="id" title="class">Avl</span></a> (<a class="idref" href="MMaps.AVLproofs.html#AvlProofs.map"><span class="id" title="definition">map</span></a> <a class="idref" href="MMaps.AVLproofs.html#f:151"><span class="id" title="variable">f</span></a> <a class="idref" href="MMaps.AVLproofs.html#m:152"><span class="id" title="variable">m</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">m</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="var">inv_avl</span>; <span class="id" title="tactic">intuition</span> (<span class="id" title="tactic">auto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">map</span> <span class="id" title="var">typeclass_instances</span>).<br/>
&nbsp;<span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">intuition</span>; <span class="id" title="tactic">rewrite</span> ?<a class="idref" href="MMaps.AVLproofs.html#AvlProofs.map_height"><span class="id" title="lemma">map_height</span></a>; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="AvlProofs.mapi_height" class="idref" href="#AvlProofs.mapi_height"><span class="id" title="lemma">mapi_height</span></a> {<a id="elt:154" class="idref" href="#elt:154"><span class="id" title="binder">elt</span></a> <a id="elt':155" class="idref" href="#elt':155"><span class="id" title="binder">elt'</span></a>}(<a id="f:156" class="idref" href="#f:156"><span class="id" title="binder">f</span></a>:<a class="idref" href="MMaps.AVLproofs.html#AvlProofs.key"><span class="id" title="definition">key</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><a class="idref" href="MMaps.AVLproofs.html#elt:154"><span class="id" title="variable">elt</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><a class="idref" href="MMaps.AVLproofs.html#elt':155"><span class="id" title="variable">elt'</span></a>) <a id="m:157" class="idref" href="#m:157"><span class="id" title="binder">m</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="MMaps.AVLproofs.html#AvlProofs.height"><span class="id" title="definition">height</span></a> (<a class="idref" href="MMaps.AVLproofs.html#AvlProofs.mapi"><span class="id" title="definition">mapi</span></a> <a class="idref" href="MMaps.AVLproofs.html#f:156"><span class="id" title="variable">f</span></a> <a class="idref" href="MMaps.AVLproofs.html#m:157"><span class="id" title="variable">m</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MMaps.AVLproofs.html#AvlProofs.height"><span class="id" title="definition">height</span></a> <a class="idref" href="MMaps.AVLproofs.html#m:157"><span class="id" title="variable">m</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">m</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
#[<span class="id" title="var">export</span>] <span class="id" title="keyword">Instance</span> <a id="AvlProofs.mapi_avl" class="idref" href="#AvlProofs.mapi_avl"><span class="id" title="instance">mapi_avl</span></a> {<a id="elt:158" class="idref" href="#elt:158"><span class="id" title="binder">elt</span></a> <a id="elt':159" class="idref" href="#elt':159"><span class="id" title="binder">elt'</span></a>}(<a id="f:160" class="idref" href="#f:160"><span class="id" title="binder">f</span></a>:<a class="idref" href="MMaps.AVLproofs.html#AvlProofs.key"><span class="id" title="definition">key</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><a class="idref" href="MMaps.AVLproofs.html#elt:158"><span class="id" title="variable">elt</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><a class="idref" href="MMaps.AVLproofs.html#elt':159"><span class="id" title="variable">elt'</span></a>) <a id="m:161" class="idref" href="#m:161"><span class="id" title="binder">m</span></a> `(<a id="Avl0:162" class="idref" href="#Avl0:162"><span class="id" title="binder">!</span></a><a id="Avl0:162" class="idref" href="#Avl0:162"><span class="id" title="binder">Avl</span></a> <a id="Avl0:162" class="idref" href="#Avl0:162"><span class="id" title="binder">m</span></a>) : <a class="idref" href="MMaps.AVLproofs.html#AvlProofs.Avl"><span class="id" title="class">Avl</span></a> (<a class="idref" href="MMaps.AVLproofs.html#AvlProofs.mapi"><span class="id" title="definition">mapi</span></a> <a class="idref" href="MMaps.AVLproofs.html#f:160"><span class="id" title="variable">f</span></a> <a class="idref" href="MMaps.AVLproofs.html#m:161"><span class="id" title="variable">m</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">m</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="var">inv_avl</span>; <span class="id" title="tactic">intuition</span> (<span class="id" title="tactic">auto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">map</span> <span class="id" title="var">typeclass_instances</span>).<br/>
&nbsp;<span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">intuition</span>; <span class="id" title="tactic">rewrite</span> ?<a class="idref" href="MMaps.AVLproofs.html#AvlProofs.mapi_height"><span class="id" title="lemma">mapi_height</span></a>; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
#[<span class="id" title="var">export</span>] <span class="id" title="keyword">Instance</span> <a id="AvlProofs.mapo_avl" class="idref" href="#AvlProofs.mapo_avl"><span class="id" title="instance">mapo_avl</span></a> {<a id="elt:163" class="idref" href="#elt:163"><span class="id" title="binder">elt</span></a> <a id="elt':164" class="idref" href="#elt':164"><span class="id" title="binder">elt'</span></a>}(<a id="f:165" class="idref" href="#f:165"><span class="id" title="binder">f</span></a>:<a class="idref" href="MMaps.AVLproofs.html#AvlProofs.key"><span class="id" title="definition">key</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><a class="idref" href="MMaps.AVLproofs.html#elt:163"><span class="id" title="variable">elt</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="MMaps.AVLproofs.html#elt':164"><span class="id" title="variable">elt'</span></a>) <a id="m:166" class="idref" href="#m:166"><span class="id" title="binder">m</span></a> `{<a id="Avl0:167" class="idref" href="#Avl0:167"><span class="id" title="binder">!</span></a><a id="Avl0:167" class="idref" href="#Avl0:167"><span class="id" title="binder">Avl</span></a> <a id="Avl0:167" class="idref" href="#Avl0:167"><span class="id" title="binder">m</span></a>} :<br/>
&nbsp;&nbsp;<a class="idref" href="MMaps.AVLproofs.html#AvlProofs.Avl"><span class="id" title="class">Avl</span></a> (<a class="idref" href="MMaps.AVLproofs.html#AvlProofs.mapo"><span class="id" title="definition">mapo</span></a> <a class="idref" href="MMaps.AVLproofs.html#f:165"><span class="id" title="variable">f</span></a> <a class="idref" href="MMaps.AVLproofs.html#m:166"><span class="id" title="variable">m</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">m</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="var">inv_avl</span>; <span class="id" title="tactic">intuition</span> (<span class="id" title="tactic">auto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">map</span> <span class="id" title="var">typeclass_instances</span>).<br/>
&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">f</span>.<br/>
&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="MMaps.AVLproofs.html#AvlProofs.join_avl"><span class="id" title="instance">join_avl</span></a>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="MMaps.AVLproofs.html#AvlProofs.concat_avl"><span class="id" title="instance">concat_avl</span></a>; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Section</span> <a id="AvlProofs.Gmerge" class="idref" href="#AvlProofs.Gmerge"><span class="id" title="section">Gmerge</span></a>.<br/>
<span class="id" title="keyword">Variable</span> <a id="AvlProofs.Gmerge.elt" class="idref" href="#AvlProofs.Gmerge.elt"><span class="id" title="variable">elt</span></a> <a id="AvlProofs.Gmerge.elt'" class="idref" href="#AvlProofs.Gmerge.elt'"><span class="id" title="variable">elt'</span></a> <a id="AvlProofs.Gmerge.elt''" class="idref" href="#AvlProofs.Gmerge.elt''"><span class="id" title="variable">elt''</span></a> : <span class="id" title="keyword">Type</span>.<br/>
<span class="id" title="keyword">Variable</span> <a id="AvlProofs.Gmerge.f" class="idref" href="#AvlProofs.Gmerge.f"><span class="id" title="variable">f</span></a> : <a class="idref" href="MMaps.AVLproofs.html#AvlProofs.key"><span class="id" title="definition">key</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MMaps.AVLproofs.html#AvlProofs.Gmerge.elt"><span class="id" title="variable">elt</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="MMaps.AVLproofs.html#AvlProofs.Gmerge.elt'"><span class="id" title="variable">elt'</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="MMaps.AVLproofs.html#AvlProofs.Gmerge.elt''"><span class="id" title="variable">elt''</span></a>.<br/>
<span class="id" title="keyword">Variable</span> <a id="AvlProofs.Gmerge.mapl" class="idref" href="#AvlProofs.Gmerge.mapl"><span class="id" title="variable">mapl</span></a> : <a class="idref" href="MMaps.AVLproofs.html#AvlProofs.t"><span class="id" title="definition">t</span></a> <a class="idref" href="MMaps.AVLproofs.html#AvlProofs.Gmerge.elt"><span class="id" title="variable">elt</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MMaps.AVLproofs.html#AvlProofs.t"><span class="id" title="definition">t</span></a> <a class="idref" href="MMaps.AVLproofs.html#AvlProofs.Gmerge.elt''"><span class="id" title="variable">elt''</span></a>.<br/>
<span class="id" title="keyword">Variable</span> <a id="AvlProofs.Gmerge.mapr" class="idref" href="#AvlProofs.Gmerge.mapr"><span class="id" title="variable">mapr</span></a> : <a class="idref" href="MMaps.AVLproofs.html#AvlProofs.t"><span class="id" title="definition">t</span></a> <a class="idref" href="MMaps.AVLproofs.html#AvlProofs.Gmerge.elt'"><span class="id" title="variable">elt'</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MMaps.AVLproofs.html#AvlProofs.t"><span class="id" title="definition">t</span></a> <a class="idref" href="MMaps.AVLproofs.html#AvlProofs.Gmerge.elt''"><span class="id" title="variable">elt''</span></a>.<br/>
<span class="id" title="keyword">Hypothesis</span> <a id="AvlProofs.Gmerge.mapl_avl" class="idref" href="#AvlProofs.Gmerge.mapl_avl"><span class="id" title="variable">mapl_avl</span></a> : <span class="id" title="keyword">∀</span> <a id="m:180" class="idref" href="#m:180"><span class="id" title="binder">m</span></a>, <a class="idref" href="MMaps.AVLproofs.html#AvlProofs.Avl"><span class="id" title="class">Avl</span></a> <a class="idref" href="MMaps.AVLproofs.html#m:180"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MMaps.AVLproofs.html#AvlProofs.Avl"><span class="id" title="class">Avl</span></a> (<a class="idref" href="MMaps.AVLproofs.html#AvlProofs.Gmerge.mapl"><span class="id" title="variable">mapl</span></a> <a class="idref" href="MMaps.AVLproofs.html#m:180"><span class="id" title="variable">m</span></a>).<br/>
<span class="id" title="keyword">Hypothesis</span> <a id="AvlProofs.Gmerge.mapr_avl" class="idref" href="#AvlProofs.Gmerge.mapr_avl"><span class="id" title="variable">mapr_avl</span></a> : <span class="id" title="keyword">∀</span> <a id="m':183" class="idref" href="#m':183"><span class="id" title="binder">m'</span></a>, <a class="idref" href="MMaps.AVLproofs.html#AvlProofs.Avl"><span class="id" title="class">Avl</span></a> <a class="idref" href="MMaps.AVLproofs.html#m':183"><span class="id" title="variable">m'</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MMaps.AVLproofs.html#AvlProofs.Avl"><span class="id" title="class">Avl</span></a> (<a class="idref" href="MMaps.AVLproofs.html#AvlProofs.Gmerge.mapr"><span class="id" title="variable">mapr</span></a> <a class="idref" href="MMaps.AVLproofs.html#m':183"><span class="id" title="variable">m'</span></a>).<br/>

<br/>
#[<span class="id" title="var">export</span>] <span class="id" title="keyword">Instance</span> <a id="AvlProofs.gmerge_avl" class="idref" href="#AvlProofs.gmerge_avl"><span class="id" title="instance">gmerge_avl</span></a> <a id="m:186" class="idref" href="#m:186"><span class="id" title="binder">m</span></a> <a id="m':187" class="idref" href="#m':187"><span class="id" title="binder">m'</span></a> `{<a id="Avl0:188" class="idref" href="#Avl0:188"><span class="id" title="binder">!</span></a><a id="Avl0:188" class="idref" href="#Avl0:188"><span class="id" title="binder">Avl</span></a> <a id="Avl0:188" class="idref" href="#Avl0:188"><span class="id" title="binder">m</span></a>, <a id="Avl1:189" class="idref" href="#Avl1:189"><span class="id" title="binder">!</span></a><a id="Avl1:189" class="idref" href="#Avl1:189"><span class="id" title="binder">Avl</span></a> <a id="Avl1:189" class="idref" href="#Avl1:189"><span class="id" title="binder">m'</span></a>} :<br/>
&nbsp;&nbsp;<a class="idref" href="MMaps.AVLproofs.html#AvlProofs.Avl"><span class="id" title="class">Avl</span></a> (<a class="idref" href="MMaps.AVLproofs.html#AvlProofs.gmerge"><span class="id" title="definition">gmerge</span></a> <a class="idref" href="MMaps.AVLproofs.html#AvlProofs.Gmerge.f"><span class="id" title="variable">f</span></a> <a class="idref" href="MMaps.AVLproofs.html#AvlProofs.Gmerge.mapl"><span class="id" title="variable">mapl</span></a> <a class="idref" href="MMaps.AVLproofs.html#AvlProofs.Gmerge.mapr"><span class="id" title="variable">mapr</span></a> <a class="idref" href="MMaps.AVLproofs.html#m:186"><span class="id" title="variable">m</span></a> <a class="idref" href="MMaps.AVLproofs.html#m':187"><span class="id" title="variable">m'</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">functional</span> <span class="id" title="tactic">induction</span> (<a class="idref" href="MMaps.AVLproofs.html#AvlProofs.gmerge"><span class="id" title="definition">gmerge</span></a> <a class="idref" href="MMaps.AVLproofs.html#AvlProofs.Gmerge.f"><span class="id" title="variable">f</span></a> <a class="idref" href="MMaps.AVLproofs.html#AvlProofs.Gmerge.mapl"><span class="id" title="variable">mapl</span></a> <a class="idref" href="MMaps.AVLproofs.html#AvlProofs.Gmerge.mapr"><span class="id" title="variable">mapr</span></a> <span class="id" title="var">m</span> <span class="id" title="var">m'</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">auto</span>; <span class="id" title="var">factornode</span> <span class="id" title="var">m2</span>; <span class="id" title="var">inv_avl</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="MMaps.AVLproofs.html#AvlProofs.join_avl"><span class="id" title="instance">join_avl</span></a> || <span class="id" title="tactic">apply</span> <a class="idref" href="MMaps.AVLproofs.html#AvlProofs.concat_avl"><span class="id" title="instance">concat_avl</span></a>; <span class="id" title="tactic">auto</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">IHt0</span> || <span class="id" title="tactic">apply</span> <span class="id" title="var">IHt2</span>; <span class="id" title="tactic">auto</span>; <span class="id" title="var">cleansplit</span>; <span class="id" title="tactic">apply</span> <a class="idref" href="MMaps.AVLproofs.html#AvlProofs.split_avl"><span class="id" title="lemma">split_avl</span></a>; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="MMaps.AVLproofs.html#AvlProofs.Gmerge"><span class="id" title="section">Gmerge</span></a>.<br/>

<br/>
#[<span class="id" title="var">export</span>] <span class="id" title="keyword">Instance</span> <a id="AvlProofs.merge_avl" class="idref" href="#AvlProofs.merge_avl"><span class="id" title="instance">merge_avl</span></a> {<a id="elt:190" class="idref" href="#elt:190"><span class="id" title="binder">elt</span></a> <a id="elt':191" class="idref" href="#elt':191"><span class="id" title="binder">elt'</span></a> <a id="elt'':192" class="idref" href="#elt'':192"><span class="id" title="binder">elt''</span></a>}<br/>
&nbsp;(<a id="f:193" class="idref" href="#f:193"><span class="id" title="binder">f</span></a>:<a class="idref" href="MMaps.AVLproofs.html#AvlProofs.key"><span class="id" title="definition">key</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="MMaps.AVLproofs.html#elt:190"><span class="id" title="variable">elt</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="MMaps.AVLproofs.html#elt':191"><span class="id" title="variable">elt'</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.21+alpha/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="MMaps.AVLproofs.html#elt'':192"><span class="id" title="variable">elt''</span></a>) <a id="m:194" class="idref" href="#m:194"><span class="id" title="binder">m</span></a> <a id="m':195" class="idref" href="#m':195"><span class="id" title="binder">m'</span></a><br/>
&nbsp;`(<a id="Avl0:196" class="idref" href="#Avl0:196"><span class="id" title="binder">!</span></a><a id="Avl0:196" class="idref" href="#Avl0:196"><span class="id" title="binder">Avl</span></a> <a id="Avl0:196" class="idref" href="#Avl0:196"><span class="id" title="binder">m</span></a>, <a id="Avl1:197" class="idref" href="#Avl1:197"><span class="id" title="binder">!</span></a><a id="Avl1:197" class="idref" href="#Avl1:197"><span class="id" title="binder">Avl</span></a> <a id="Avl1:197" class="idref" href="#Avl1:197"><span class="id" title="binder">m'</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;<a class="idref" href="MMaps.AVLproofs.html#AvlProofs.Avl"><span class="id" title="class">Avl</span></a> (<a class="idref" href="MMaps.AVLproofs.html#AvlProofs.merge"><span class="id" title="definition">merge</span></a> <a class="idref" href="MMaps.AVLproofs.html#f:193"><span class="id" title="variable">f</span></a> <a class="idref" href="MMaps.AVLproofs.html#m:194"><span class="id" title="variable">m</span></a> <a class="idref" href="MMaps.AVLproofs.html#m':195"><span class="id" title="variable">m'</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="MMaps.AVLproofs.html#AvlProofs.gmerge_avl"><span class="id" title="instance">gmerge_avl</span></a>; <span class="id" title="tactic">auto</span> <span class="id" title="keyword">using</span> <a class="idref" href="MMaps.AVLproofs.html#AvlProofs.mapo_avl"><span class="id" title="instance">mapo_avl</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="MMaps.AVLproofs.html#AvlProofs"><span class="id" title="module">AvlProofs</span></a>.<br/>

<br/>
</div>

<div class="doc">
We could hence define <span class="inlinecode"><a class="idref" href="MMaps.GenTree.html#Props.Ok"><span class="id" title="record">Ok</span></a></span> <span class="inlinecode"><a class="idref" href="MMaps.Raw.html#WS.Specs.m"><span class="id" title="variable">m</span></a></span> as <span class="inlinecode"><a class="idref" href="MMaps.GenTree.html#Props.Bst"><span class="id" title="inductive">Bst</span></a></span> <span class="inlinecode"><a class="idref" href="MMaps.Raw.html#WS.Specs.m"><span class="id" title="variable">m</span></a></span> <span class="inlinecode">∧</span> <span class="inlinecode"><a class="idref" href="MMaps.AVLproofs.html#AvlProofs.Avl"><span class="id" title="record">Avl</span></a></span> <span class="inlinecode"><a class="idref" href="MMaps.Raw.html#WS.Specs.m"><span class="id" title="variable">m</span></a></span> and re-validate
    the <span class="inlinecode"><span class="id" title="var">Raw.S</span></span> signature. This would be more robust in case new ops
    are added in the signature. But that would be yet another wrapper,
    so we don't do it for the moment. 
</div>
<div class="code">
</div>
</div>
<div id="footer">
  Generated by <a href="http://coq.inria.fr">coqdoc</a> and improved with <a href="https://github.com/palmskog/coqdocjs">CoqdocJS</a> as adapted for <a href="https://github.com/coq-community">coq-community</a>
</div>
</div>
</body>

</html>
